!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["my-library"]=e():t["my-library"]=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(5);const r="https://todoapihost.000webhostapp.com/api/";var o={url:{getList:r+"getList.php",addTask:r+"addTask.php",updateTask:r+"updateTask.php",deleteTask:r+"deleteTask.php"},priority:{1:"",2:"table-success",3:"table-info",4:"table-warning",5:"table-danger"}};var i=class{static getTasksFromServer(){return new Promise((t,e)=>{let n=new XMLHttpRequest;const r=o.url.getList;n.open("GET",r,!0),n.onload=function(){t(JSON.parse(this.response))},n.onerror=function(){e("Error: connection failed.")},n.send()})}static removeTaskFromServer(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.deleteTask;r.open("DELETE",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to delete the item.")},r.send(JSON.stringify({id:t}))})}static updateTask(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.updateTask;r.open("PUT",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to update the task.")},r.send(JSON.stringify(t))})}static addTask(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.addTask;r.open("POST",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to add new task.")},r.send(JSON.stringify(t))})}};var s=class{constructor(t,e,n,r,o){this.id=t,this.title=e,this.details=n,this.priority=r,this.isDone=o,this.id=t,this.title=e,this.details=n,this.priority=r,this.isDone=o}render(t,e,n){const r=document.createElement("tr");return 0==this.isDone?(r.setAttribute("class",`${o.priority[this.priority]}`),r.setAttribute("data-id",`${this.id}`),r.innerHTML=`\n                <th scope="row">${t}</th>\n                <td>${this.title}</td>\n                <td>${this.details}</td>\n                <td>${this.priority}</td>\n                <td><input class="form-check-input" type="checkbox"></td>\n                <td class="edit"><img src="img/pencil_and_paper-512.png" width="24" height="24"></td>\n                <td class="remove"><img src="img/Trash_Can-512.png" width="24" height="24"></td>\n            `,e.appendChild(r),!1):(r.innerHTML=`\n                <li class="list-group-item d-flex justify-content-between align-items-center completed" data-id="${this.id}">\n                    ${this.title}\n                </li>\n            `,n.appendChild(r),!0)}},a=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})};const c=t=>{i.updateTask(t).then(t=>{const e=new h;console.log(t),e.render()}).catch(t=>{console.log(t)})},d=function(t,e){const n=e.find(e=>e.id===t);n.isDone="1",i.updateTask(n).then(t=>{console.log(t),(new h).render()}).catch(t=>{console.log(t)})},l=function(t,e){const n=e.find(e=>e.id===t);n.isDone="0",i.updateTask(n).then(t=>{console.log(t),(new h).render()}).catch(t=>{console.log(t)})};var u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})};const p=function(t){const e=new h;i.removeTaskFromServer(t).then(t=>{console.log(t),e.render()}).catch(t=>{console.log(t)})},f=function(t){return u(this,void 0,void 0,function*(){const e=new h;t.forEach((n,r)=>{i.removeTaskFromServer(n).then(n=>{console.log(n),r+1===t.length&&e.render()}).catch(t=>{console.log(t)})})})};var h=class{constructor(t){this.form=new v,this.completed=[],t&&this.render()}storeCompleted(){document.querySelectorAll(".completed").forEach(t=>{const e=parseInt(t.getAttribute("data-id"));this.completed.push(e)})}bindEdit(t){const e=this;document.querySelectorAll(".edit").forEach(n=>{n.addEventListener("click",function(){const n=this.parentElement.getAttribute("data-id"),r=t.find(t=>t.id===n);e.form.enableEdit(r)})})}bindRemove(){document.querySelectorAll(".remove").forEach(t=>{t.addEventListener("click",function(){const t=this.parentElement.getAttribute("data-id");p(t)})})}bindCheckbox(t){document.querySelectorAll(".form-check-input").forEach(e=>{e.addEventListener("click",function(){const e=this.parentElement.parentElement.getAttribute("data-id");d(e,t)})})}bindCompletedTasks(t){document.querySelectorAll(".completed").forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-id");l(e,t)})})}renderClearButton(){const t=document.createElement("button");t.classList.add("btn","btn-primary","col-4","h-25"),t.innerHTML="Clear",t.addEventListener("click",t=>{f(this.completed)}),document.getElementById("completed").appendChild(t)}render(){(function(){return a(this,void 0,void 0,function*(){let t=[];return yield i.getTasksFromServer().then(function(e){let n=1;const r=document.getElementById("tasks"),o=document.getElementById("completed");r.innerHTML="",o.innerHTML="",e.forEach(t=>{(t=new s(t.id,t.title,t.details,t.priority,t.isDone)).render(n,r,o)||n++}),t=e}).catch(t=>{console.log(t)}),new Promise(e=>{e(t)})})})().then(t=>{this.bindEdit(t),this.bindRemove(),this.bindCheckbox(t),this.bindCompletedTasks(t),this.storeCompleted(),this.renderClearButton()})}};const m=t=>{const e=new h;i.addTask(t).then(t=>{console.log(t),e.render()}).catch(t=>{console.log(t)})};var v=class{constructor(t){this.container=document.getElementById("form"),this.defaultTask={title:"",details:"",priority:1,id:""},t&&this.render({mode:"Add",task:this.defaultTask})}setInputs(){this.title=document.getElementById("title"),this.details=document.getElementById("details"),this.priority=document.getElementById("priority"),this.submit=document.getElementById("submit")}bindAdd(){this.submit.addEventListener("click",t=>{t.preventDefault(),m(this.getInputValues()),this.render({mode:"Add",task:this.defaultTask})})}bindEdit(){this.submit.addEventListener("click",t=>{t.preventDefault(),c(this.getInputValues()),this.render({mode:"Add",task:this.defaultTask})})}getInputValues(){return{title:this.title.value,details:this.details.value,priority:this.priority.value,isDone:0,id:this.submit.getAttribute("data-id")}}renderCancelButton(){const t=document.createElement("button");t.classList.add("btn","btn-primary","col-4","h-25"),t.innerHTML="Cancel",t.addEventListener("click",t=>{t.preventDefault(),this.render({mode:"Add",task:this.defaultTask})}),this.container.appendChild(t)}render(t){this.container.innerHTML="";const e=document.createElement("fieldset");e.innerHTML=`\n            <h5>${t.mode} task:</h5>\n                <div class="form-group">\n                    <label class="col-form-label" for="title">Title:</label>\n                    <input type="text" class="form-control" placeholder="Enter note title" id="title" value="${t.task.title}">\n                </div>\n                <div class="form-group">\n                    <label for="details">Additional details (optional):</label>\n                    <textarea class="form-control" id="details" rows="3">${t.task.details}</textarea>\n                </div>\n                <div class="row">\n                    <div class="form-group col-3">\n                        <select class="form-control" id="priority" value="${t.task.priority}">\n                            <option value="1">1</option>\n                            <option value="2">2</option>\n                            <option value="3">3</option>\n                            <option value="4">4</option>\n                            <option value="5">5</option>\n                        </select>\n                        <label for="priority">Priority</label>\n                    </div>\n                    <div class="col-5"></div>\n                    <button type="submit" class="btn btn-primary col-4 h-25" id="submit" data-id="${t.task.id}">${t.mode}</button>\n                </div>\n            `,this.container.appendChild(e),this.setInputs(),"Add"===t.mode?this.bindAdd():(this.bindEdit(),this.renderCancelButton())}enableEdit(t){this.render({mode:"Edit",task:t})}};document.addEventListener("DOMContentLoaded",()=>{!function(){console.log("Initializing...");new h(!0),new v(!0)}()})},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r,o,i={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,d=0,l=[],u=n(1);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(y(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(y(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function h(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var s=d++;n=c||(c=v(e)),r=k.bind(null,n,s,!1),o=k.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return p(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o];(a=i[s.id]).refs--,r.push(a)}t&&p(f(t,e),e);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}};var g,w=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function k(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"/* .start {\r\n    color: darkred;\r\n    text-align: center;\r\n} */",""])},function(t,e,n){var r=n(4);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(t.exports=r.locals)}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvdXRpbHMvY29uZmlnLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvU2VydmVyLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvVGFzay50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL21vZHVsZXMvZWRpdFRhc2sudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9tb2R1bGVzL3JlbW92ZVRhc2sudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9MaXN0LnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvbW9kdWxlcy9nZXRUYXNrcy50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL21vZHVsZXMvYWRkVGFzay50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL0Zvcm0udHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9tYWluLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvc3R5bGVzL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9zdHlsZXMvc3R5bGVzLmNzcz84ZDc5Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInNlcnZlciIsInV0aWxzX2NvbmZpZyIsInVybCIsImdldExpc3QiLCJhZGRUYXNrIiwidXBkYXRlVGFzayIsImRlbGV0ZVRhc2siLCJwcmlvcml0eSIsIjEiLCIyIiwiMyIsIjQiLCI1Iiwic3JjX1NlcnZlciIsIltvYmplY3QgT2JqZWN0XSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwidGhpcyIsInJlc3BvbnNlIiwib25lcnJvciIsInNlbmQiLCJpZCIsInN0cmluZ2lmeSIsInRhc2siLCJzcmNfVGFzayIsInRpdGxlIiwiZGV0YWlscyIsImlzRG9uZSIsImluZGV4IiwiaW5jb21wbGV0ZSIsImNvbXBsZXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJlZGl0VGFzayIsInRoZW4iLCJsaXN0Iiwic3JjX0xpc3QiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyIiwiY2F0Y2giLCJlcnIiLCJtYXJrVGFza0FzRG9uZSIsInRhc2tzIiwiZmluZCIsInVuZG9Db21wbGV0ZWQiLCJyZW1vdmVUYXNrIiwicmVtb3ZlVGFza0Zyb21TZXJ2ZXIiLCJyZW1vdmVDb21wbGV0ZWQiLCJmb3JFYWNoIiwibGVuZ3RoIiwiaW5pdCIsImZvcm0iLCJzcmNfRm9ybSIsImNvbXBsZXRlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsInB1c2giLCJ0YXNrTGlzdCIsInRoYXQiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwicGFyZW50RWxlbWVudCIsImVuYWJsZUVkaXQiLCJjbGVhciIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJnZXRFbGVtZW50QnlJZCIsInJlc3VsdCIsImdldFRhc2tzRnJvbVNlcnZlciIsIml0ZW1zIiwiaXRlbSIsImdldFRhc2tzIiwiYmluZEVkaXQiLCJiaW5kUmVtb3ZlIiwiYmluZENoZWNrYm94IiwiYmluZENvbXBsZXRlZFRhc2tzIiwic3RvcmVDb21wbGV0ZWQiLCJyZW5kZXJDbGVhckJ1dHRvbiIsImNvbnRhaW5lciIsImRlZmF1bHRUYXNrIiwibW9kZSIsInN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJjYW5jZWwiLCJwcm9wIiwic2V0SW5wdXRzIiwiYmluZEFkZCIsInJlbmRlckNhbmNlbEJ1dHRvbiIsInNyY19pbml0IiwiY3NzIiwibG9jYXRpb24iLCJFcnJvciIsImJhc2VVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJjdXJyZW50RGlyIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiZnVsbE1hdGNoIiwib3JpZ1VybCIsIm5ld1VybCIsInVucXVvdGVkT3JpZ1VybCIsInRyaW0iLCIkMSIsInRlc3QiLCJpbmRleE9mIiwiZm4iLCJtZW1vIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0RWxlbWVudCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJtZWRpYSIsInNvdXJjZU1hcCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImtleSIsIm9iaiIsInVwZGF0ZSIsInJlbW92ZSIsInRyYW5zZm9ybSIsInN0eWxlSW5kZXgiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiYmluZCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJidG9hIiwibGluayIsInJlbCIsImNyZWF0ZUxpbmtFbGVtZW50IiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsImNzc05vZGUiLCJjaGlsZE5vZGVzIiwidXNlU291cmNlTWFwIiwidG9TdHJpbmciLCJtYXAiLCJjb250ZW50IiwiY3NzTWFwcGluZyIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJobXIiLCJsb2NhbHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsY0FBQUQsSUFFQUQsRUFBQSxjQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUCxRQUdBLElBQUFDLEVBQUFJLEVBQUFFLElBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVQsWUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMkNBLE9BdENBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFBZSxJQUNBRyxPQUFBQyxlQUFBbkIsRUFBQWUsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFWLEVBQUFpQixFQUFBLFNBQUF2QixHQUNBa0IsT0FBQUMsZUFBQW5CLEVBQUEsY0FBaUR3QixPQUFBLEtBSWpEbEIsRUFBQW1CLEVBQUEsU0FBQXhCLEdBQ0EsSUFBQWUsRUFBQWYsS0FBQXlCLFdBQ0EsV0FBMkIsT0FBQXpCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUssRUFBQVEsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxH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QUFBN0ksRUFBQSxHQUNBQSxFQUFBLEdBQUE2SSxFQUNLQSxJQUNMN0ksRUFBQSxPQUFBQSxFQUFBLGFBQUE2SSxFQUFBLEtBRUFuTCxFQUFBdUIsS0FBQWUsTUFJQXRDLHFCQzlDQTdFLEVBQUFELFFBQUFNLEVBQUEsRUFBQUEsRUFBQSxJQUtBK0YsTUFBQXBHLEVBQUFPLEVBQUEsd0VBQTRGLHNCQ0o1RixJQUFBZ1AsRUFBQWxQLEVBQUEsR0FFQSxpQkFBQWtQLFFBQUF2UCxFQUFBTyxFQUFBZ1AsRUFBQSxNQU9BLElBQUExRSxHQUFlcUYsS0FBQSxFQUVmaEQsZUFQQUEsRUFRQXZCLGdCQUFBYSxHQUVBbk0sRUFBQSxFQUFBQSxDQUFBa1AsRUFBQTFFLEdBRUEwRSxFQUFBWSxTQUFBblEsRUFBQUQsUUFBQXdQLEVBQUFZIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJteS1saWJyYXJ5XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm15LWxpYnJhcnlcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBzZXJ2ZXIgPSBcImh0dHBzOi8vdG9kb2FwaWhvc3QuMDAwd2ViaG9zdGFwcC5jb20vYXBpL1wiO1xyXG5cclxuY29uc3QgY29uZmlnOiBhbnkgPSB7XHJcbiAgICB1cmw6IHtcclxuICAgICAgICBnZXRMaXN0OiBzZXJ2ZXIgKyBcImdldExpc3QucGhwXCIsXHJcbiAgICAgICAgYWRkVGFzazogc2VydmVyICsgXCJhZGRUYXNrLnBocFwiLFxyXG4gICAgICAgIHVwZGF0ZVRhc2s6IHNlcnZlciArIFwidXBkYXRlVGFzay5waHBcIixcclxuICAgICAgICBkZWxldGVUYXNrOiBzZXJ2ZXIgKyBcImRlbGV0ZVRhc2sucGhwXCJcclxuICAgIH0sXHJcbiAgICBwcmlvcml0eToge1xyXG4gICAgICAgIDE6IFwiXCIsXHJcbiAgICAgICAgMjogXCJ0YWJsZS1zdWNjZXNzXCIsXHJcbiAgICAgICAgMzogXCJ0YWJsZS1pbmZvXCIsXHJcbiAgICAgICAgNDogXCJ0YWJsZS13YXJuaW5nXCIsXHJcbiAgICAgICAgNTogXCJ0YWJsZS1kYW5nZXJcIlxyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29uZmlnOyIsImltcG9ydCBjb25maWcgZnJvbSAnLi91dGlscy9jb25maWcnO1xyXG5cclxuY2xhc3MgU2VydmVyIHtcclxuICAgIHN0YXRpYyBnZXRUYXNrc0Zyb21TZXJ2ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSAnR0VUJztcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gY29uZmlnLnVybC5nZXRMaXN0O1xyXG4gICAgICAgICAgICBjb25zdCBhc3luYyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoJ0Vycm9yOiBjb25uZWN0aW9uIGZhaWxlZC4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZW1vdmVUYXNrRnJvbVNlcnZlcihpZDogbnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSAnREVMRVRFJztcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gY29uZmlnLnVybC5kZWxldGVUYXNrO1xyXG4gICAgICAgICAgICBjb25zdCBhc3luYyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoJ0Vycm9yOiBmYWlsZWQgdG8gZGVsZXRlIHRoZSBpdGVtLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHsgaWQ6IGlkIH0pKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdXBkYXRlVGFzayh0YXNrOiBvYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9ICdQVVQnO1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBjb25maWcudXJsLnVwZGF0ZVRhc2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XHJcblxyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3I6IGZhaWxlZCB0byB1cGRhdGUgdGhlIHRhc2suJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkodGFzaykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhZGRUYXNrKHRhc2s6IG9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gJ1BPU1QnO1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBjb25maWcudXJsLmFkZFRhc2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XHJcblxyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3I6IGZhaWxlZCB0byBhZGQgbmV3IHRhc2suJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkodGFzaykpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZXJ2ZXI7IiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL3V0aWxzL2NvbmZpZyc7XHJcblxyXG5jbGFzcyBUYXNrIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHByaXZhdGUgaWQ6IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIHRpdGxlOiBzdHJpbmcsXHJcbiAgICAgICAgcHJpdmF0ZSBkZXRhaWxzOiBzdHJpbmcsXHJcbiAgICAgICAgcHJpdmF0ZSBwcmlvcml0eTogbnVtYmVyLFxyXG4gICAgICAgIHByaXZhdGUgaXNEb25lOiBib29sZWFuKSB7XHJcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLmRldGFpbHMgPSBkZXRhaWxzO1xyXG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICAgICAgICB0aGlzLmlzRG9uZSA9IGlzRG9uZTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXIoaW5kZXg6IG51bWJlciwgaW5jb21wbGV0ZTogYW55LCBjb21wbGV0ZTogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdGFzayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNEb25lID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRhc2suc2V0QXR0cmlidXRlKCdjbGFzcycsIGAke2NvbmZpZy5wcmlvcml0eVt0aGlzLnByaW9yaXR5XX1gKTtcclxuICAgICAgICAgICAgdGFzay5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBgJHt0aGlzLmlkfWApO1xyXG4gICAgICAgICAgICB0YXNrLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDx0aCBzY29wZT1cInJvd1wiPiR7aW5kZXh9PC90aD5cclxuICAgICAgICAgICAgICAgIDx0ZD4ke3RoaXMudGl0bGV9PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4ke3RoaXMuZGV0YWlsc308L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPiR7dGhpcy5wcmlvcml0eX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPjxpbnB1dCBjbGFzcz1cImZvcm0tY2hlY2staW5wdXRcIiB0eXBlPVwiY2hlY2tib3hcIj48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiZWRpdFwiPjxpbWcgc3JjPVwiaW1nL3BlbmNpbF9hbmRfcGFwZXItNTEyLnBuZ1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJyZW1vdmVcIj48aW1nIHNyYz1cImltZy9UcmFzaF9DYW4tNTEyLnBuZ1wiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiPjwvdGQ+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIGluY29tcGxldGUuYXBwZW5kQ2hpbGQodGFzayk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0YXNrLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbSBkLWZsZXgganVzdGlmeS1jb250ZW50LWJldHdlZW4gYWxpZ24taXRlbXMtY2VudGVyIGNvbXBsZXRlZFwiIGRhdGEtaWQ9XCIke3RoaXMuaWR9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLnRpdGxlfVxyXG4gICAgICAgICAgICAgICAgPC9saT5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgY29tcGxldGUuYXBwZW5kQ2hpbGQodGFzayk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVGFzaztcclxuIiwiaW1wb3J0IFNlcnZlciBmcm9tICcuLi9TZXJ2ZXInO1xyXG5pbXBvcnQgTGlzdCBmcm9tICcuLi9MaXN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0VGFzayA9ICh0YXNrOiBvYmplY3QpID0+IHtcclxuXHJcbiAgICBTZXJ2ZXIudXBkYXRlVGFzayh0YXNrKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gbmV3IExpc3Q7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgbGlzdC5yZW5kZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBtYXJrVGFza0FzRG9uZSA9IGZ1bmN0aW9uIChpZDogbnVtYmVyLCB0YXNrczogYW55KSB7XHJcblxyXG4gICAgY29uc3QgdGFzayA9IHRhc2tzLmZpbmQoKHRhc2s6IGFueSkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0YXNrLmlkID09PSBpZDtcclxuICAgIH0pO1xyXG4gICAgdGFzay5pc0RvbmUgPSBcIjFcIjtcclxuICAgIFNlcnZlci51cGRhdGVUYXNrKHRhc2spXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0O1xyXG4gICAgICAgICAgICBsaXN0LnJlbmRlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHVuZG9Db21wbGV0ZWQgPSBmdW5jdGlvbiAoaWQ6IG51bWJlciwgdGFza3M6IGFueSkge1xyXG5cclxuICAgIGNvbnN0IHRhc2sgPSB0YXNrcy5maW5kKCh0YXNrOiBhbnkpID0+IHtcclxuICAgICAgICByZXR1cm4gdGFzay5pZCA9PT0gaWQ7XHJcbiAgICB9KTtcclxuICAgIHRhc2suaXNEb25lID0gXCIwXCI7XHJcbiAgICBTZXJ2ZXIudXBkYXRlVGFzayh0YXNrKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdDtcclxuICAgICAgICAgICAgbGlzdC5yZW5kZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn0iLCJpbXBvcnQgU2VydmVyIGZyb20gJy4uL1NlcnZlcic7XHJcbmltcG9ydCBMaXN0IGZyb20gJy4uL0xpc3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZVRhc2sgPSBmdW5jdGlvbiAoaWQ6IG51bWJlcikge1xyXG4gICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0O1xyXG5cclxuICAgIFNlcnZlci5yZW1vdmVUYXNrRnJvbVNlcnZlcihpZClcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBsaXN0LnJlbmRlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZUNvbXBsZXRlZCA9IGFzeW5jIGZ1bmN0aW9uICh0YXNrczogbnVtYmVyW10pIHtcclxuICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdDtcclxuXHJcbiAgICB0YXNrcy5mb3JFYWNoKCh0YXNrLCBpbmRleCkgPT4ge1xyXG4gICAgICAgIFNlcnZlci5yZW1vdmVUYXNrRnJvbVNlcnZlcih0YXNrKVxyXG4gICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCArIDEgPT09IHRhc2tzLmxlbmd0aCkgbGlzdC5yZW5kZXIoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICB9KVxyXG5cclxufSIsImltcG9ydCBGb3JtIGZyb20gJy4vRm9ybSc7XHJcbmltcG9ydCB7IGdldFRhc2tzIH0gZnJvbSAnLi9tb2R1bGVzL2dldFRhc2tzJztcclxuaW1wb3J0IHsgbWFya1Rhc2tBc0RvbmUsIHVuZG9Db21wbGV0ZWQgfSBmcm9tICcuL21vZHVsZXMvZWRpdFRhc2snO1xyXG5pbXBvcnQgeyByZW1vdmVUYXNrLCByZW1vdmVDb21wbGV0ZWQgfSBmcm9tICcuL21vZHVsZXMvcmVtb3ZlVGFzayc7XHJcblxyXG5jbGFzcyBMaXN0IHtcclxuICAgIHByaXZhdGUgZm9ybSA9IG5ldyBGb3JtO1xyXG4gICAgcHJpdmF0ZSBjb21wbGV0ZWQ6IG51bWJlcltdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5pdD86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaW5pdCkgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0b3JlQ29tcGxldGVkKCkge1xyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbXBsZXRlZCcpO1xyXG4gICAgICAgIHRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaWQ6IG51bWJlciA9IHBhcnNlSW50KHRhc2suZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBsZXRlZC5wdXNoKGlkKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZEVkaXQodGFza0xpc3Q6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZWRpdCcpO1xyXG4gICAgICAgIGJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkOiBudW1iZXIgPSB0aGlzLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXNrID0gdGFza0xpc3QuZmluZCgodGFzazogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhc2suaWQgPT09IGlkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmZvcm0uZW5hYmxlRWRpdCh0YXNrKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kUmVtb3ZlKCkge1xyXG4gICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVtb3ZlJyk7XHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQ6IG51bWJlciA9IHRoaXMucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZVRhc2soaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRDaGVja2JveCh0YXNrTGlzdDogb2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLWNoZWNrLWlucHV0Jyk7XHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQ6IG51bWJlciA9IHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgbWFya1Rhc2tBc0RvbmUoaWQsIHRhc2tMaXN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kQ29tcGxldGVkVGFza3ModGFza0xpc3Q6IG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tcGxldGVkJyk7XHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQ6IG51bWJlciA9IHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgICAgICB1bmRvQ29tcGxldGVkKGlkLCB0YXNrTGlzdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQ2xlYXJCdXR0b24oKSB7XHJcbiAgICAgICAgY29uc3QgY2xlYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBjbGVhci5jbGFzc0xpc3QuYWRkKCdidG4nLCAnYnRuLXByaW1hcnknLCAnY29sLTQnLCAnaC0yNScpO1xyXG4gICAgICAgIGNsZWFyLmlubmVySFRNTCA9ICdDbGVhcic7XHJcbiAgICAgICAgY2xlYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICByZW1vdmVDb21wbGV0ZWQodGhpcy5jb21wbGV0ZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wbGV0ZWQnKS5hcHBlbmRDaGlsZChjbGVhcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcigpIHtcclxuICAgICAgICBnZXRUYXNrcygpLnRoZW4oKHRhc2tMaXN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZEVkaXQodGFza0xpc3QpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRSZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5iaW5kQ2hlY2tib3godGFza0xpc3QpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRDb21wbGV0ZWRUYXNrcyh0YXNrTGlzdCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmVDb21wbGV0ZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDbGVhckJ1dHRvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBMaXN0O1xyXG4iLCJpbXBvcnQgU2VydmVyIGZyb20gJy4uL1NlcnZlcic7XHJcbmltcG9ydCBUYXNrIGZyb20gJy4uL1Rhc2snO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRhc2tzKCkge1xyXG4gICAgbGV0IHJlc3VsdDogb2JqZWN0W10gPSBbXTtcclxuICAgIGF3YWl0IFNlcnZlci5nZXRUYXNrc0Zyb21TZXJ2ZXIoKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChpdGVtczogb2JqZWN0W10pIHtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciA9IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGluY29tcGxldGU6IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXNrcycpO1xyXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZTogYW55ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBsZXRlZCcpO1xyXG4gICAgICAgICAgICBpbmNvbXBsZXRlLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgICAgICBjb21wbGV0ZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gbmV3IFRhc2soaXRlbS5pZCwgaXRlbS50aXRsZSwgaXRlbS5kZXRhaWxzLCBpdGVtLnByaW9yaXR5LCBpdGVtLmlzRG9uZSk7XHJcbiAgICAgICAgICAgICAgICAhaXRlbS5yZW5kZXIoaSwgaW5jb21wbGV0ZSwgY29tcGxldGUpID8gaSsrIDogaTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGl0ZW1zO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgIH0pO1xyXG59IiwiaW1wb3J0IFNlcnZlciBmcm9tICcuLi9TZXJ2ZXInO1xyXG5pbXBvcnQgTGlzdCBmcm9tICcuLi9MaXN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRUYXNrID0gKHRhc2s6IG9iamVjdCkgPT4ge1xyXG4gICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0O1xyXG5cclxuICAgIFNlcnZlci5hZGRUYXNrKHRhc2spXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgbGlzdC5yZW5kZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn0iLCJpbXBvcnQgeyBhZGRUYXNrIH0gZnJvbSAnLi9tb2R1bGVzL2FkZFRhc2snO1xyXG5pbXBvcnQgeyBlZGl0VGFzayB9IGZyb20gJy4vbW9kdWxlcy9lZGl0VGFzayc7XHJcblxyXG5pbnRlcmZhY2UgUmVuZGVyT3B0aW9ucyB7XHJcbiAgICBtb2RlOiAnQWRkJyB8ICdFZGl0JztcclxuICAgIHRhc2s/OiB7XHJcbiAgICAgICAgdGl0bGU/OiBzdHJpbmc7XHJcbiAgICAgICAgZGV0YWlscz86IHN0cmluZztcclxuICAgICAgICBwcmlvcml0eT86IG51bWJlcjtcclxuICAgICAgICBpZD86IG51bWJlcjtcclxuICAgIH1cclxufTtcclxuXHJcbmNsYXNzIEZvcm0ge1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpO1xyXG4gICAgcHJpdmF0ZSB0aXRsZTogYW55O1xyXG4gICAgcHJpdmF0ZSBkZXRhaWxzOiBhbnk7XHJcbiAgICBwcml2YXRlIHByaW9yaXR5OiBhbnk7XHJcbiAgICBwcml2YXRlIHN1Ym1pdDogYW55O1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0VGFzazogb2JqZWN0ID0ge1xyXG4gICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgIGRldGFpbHM6IFwiXCIsXHJcbiAgICAgICAgcHJpb3JpdHk6IDEsXHJcbiAgICAgICAgaWQ6IFwiXCJcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihpbml0PzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpbml0KSB0aGlzLnJlbmRlcih7IG1vZGU6ICdBZGQnLCB0YXNrOiB0aGlzLmRlZmF1bHRUYXNrIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0SW5wdXRzKCkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKTtcclxuICAgICAgICB0aGlzLmRldGFpbHMgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscycpO1xyXG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJpb3JpdHknKTtcclxuICAgICAgICB0aGlzLnN1Ym1pdCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJtaXQnKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRBZGQoKSB7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFkZFRhc2sodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoeyBtb2RlOiAnQWRkJywgdGFzazogdGhpcy5kZWZhdWx0VGFzayB9KTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kRWRpdCgpIHtcclxuICAgICAgICB0aGlzLnN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZWRpdFRhc2sodGhpcy5nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoeyBtb2RlOiAnQWRkJywgdGFzazogdGhpcy5kZWZhdWx0VGFzayB9KTtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCB0aXRsZSA9IHRoaXMudGl0bGUudmFsdWU7XHJcbiAgICAgICAgY29uc3QgZGV0YWlscyA9IHRoaXMuZGV0YWlscy52YWx1ZTtcclxuICAgICAgICBjb25zdCBwcmlvcml0eSA9IHRoaXMucHJpb3JpdHkudmFsdWU7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLnN1Ym1pdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcclxuICAgICAgICByZXR1cm4geyB0aXRsZSwgZGV0YWlscywgcHJpb3JpdHksIGlzRG9uZTogMCwgaWQgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQ2FuY2VsQnV0dG9uKCkge1xyXG4gICAgICAgIGNvbnN0IGNhbmNlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGNhbmNlbC5jbGFzc0xpc3QuYWRkKCdidG4nLCAnYnRuLXByaW1hcnknLCAnY29sLTQnLCAnaC0yNScpO1xyXG4gICAgICAgIGNhbmNlbC5pbm5lckhUTUwgPSAnQ2FuY2VsJztcclxuICAgICAgICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHsgbW9kZTogJ0FkZCcsIHRhc2s6IHRoaXMuZGVmYXVsdFRhc2sgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIocHJvcDogUmVuZGVyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmllbGRzZXQnKTtcclxuICAgICAgICBmb3JtLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPGg1PiR7cHJvcC5tb2RlfSB0YXNrOjwvaDU+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImNvbC1mb3JtLWxhYmVsXCIgZm9yPVwidGl0bGVcIj5UaXRsZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJFbnRlciBub3RlIHRpdGxlXCIgaWQ9XCJ0aXRsZVwiIHZhbHVlPVwiJHtwcm9wLnRhc2sudGl0bGV9XCI+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImRldGFpbHNcIj5BZGRpdGlvbmFsIGRldGFpbHMgKG9wdGlvbmFsKTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiZGV0YWlsc1wiIHJvd3M9XCIzXCI+JHtwcm9wLnRhc2suZGV0YWlsc308L3RleHRhcmVhPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXAgY29sLTNcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwicHJpb3JpdHlcIiB2YWx1ZT1cIiR7cHJvcC50YXNrLnByaW9yaXR5fVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjFcIj4xPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMlwiPjI8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIzXCI+Mzwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjRcIj40PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNVwiPjU8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJwcmlvcml0eVwiPlByaW9yaXR5PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLTVcIj48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBjb2wtNCBoLTI1XCIgaWQ9XCJzdWJtaXRcIiBkYXRhLWlkPVwiJHtwcm9wLnRhc2suaWR9XCI+JHtwcm9wLm1vZGV9PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChmb3JtKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRJbnB1dHMoKTtcclxuXHJcbiAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gJ0FkZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5iaW5kQWRkKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5iaW5kRWRpdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNhbmNlbEJ1dHRvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZW5hYmxlRWRpdCh0YXNrOiBvYmplY3QpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcih7IG1vZGU6ICdFZGl0JywgdGFzazogdGFzayB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybTsiLCJpbXBvcnQgJy4vc3R5bGVzL3N0eWxlcy5jc3MnO1xyXG5pbXBvcnQgeyBpbml0IH0gZnJvbSAnLi9pbmRleCc7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB7XHJcbiAgICBpbml0KCk7XHJcbn0pIiwiaW1wb3J0IEZvcm0gZnJvbSAnLi9Gb3JtJztcclxuaW1wb3J0IExpc3QgZnJvbSAnLi9MaXN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coJ0luaXRpYWxpemluZy4uLicpO1xyXG4gICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0KHRydWUpO1xyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtKHRydWUpO1xyXG59IiwiXG4vKipcbiAqIFdoZW4gc291cmNlIG1hcHMgYXJlIGVuYWJsZWQsIGBzdHlsZS1sb2FkZXJgIHVzZXMgYSBsaW5rIGVsZW1lbnQgd2l0aCBhIGRhdGEtdXJpIHRvXG4gKiBlbWJlZCB0aGUgY3NzIG9uIHRoZSBwYWdlLiBUaGlzIGJyZWFrcyBhbGwgcmVsYXRpdmUgdXJscyBiZWNhdXNlIG5vdyB0aGV5IGFyZSByZWxhdGl2ZSB0byBhXG4gKiBidW5kbGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBwYWdlLlxuICpcbiAqIE9uZSBzb2x1dGlvbiBpcyB0byBvbmx5IHVzZSBmdWxsIHVybHMsIGJ1dCB0aGF0IG1heSBiZSBpbXBvc3NpYmxlLlxuICpcbiAqIEluc3RlYWQsIHRoaXMgZnVuY3Rpb24gXCJmaXhlc1wiIHRoZSByZWxhdGl2ZSB1cmxzIHRvIGJlIGFic29sdXRlIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBwYWdlIGxvY2F0aW9uLlxuICpcbiAqIEEgcnVkaW1lbnRhcnkgdGVzdCBzdWl0ZSBpcyBsb2NhdGVkIGF0IGB0ZXN0L2ZpeFVybHMuanNgIGFuZCBjYW4gYmUgcnVuIHZpYSB0aGUgYG5wbSB0ZXN0YCBjb21tYW5kLlxuICpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjc3MpIHtcbiAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cbiAgdmFyIGxvY2F0aW9uID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb247XG5cbiAgaWYgKCFsb2NhdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihcImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uXCIpO1xuICB9XG5cblx0Ly8gYmxhbmsgb3IgbnVsbD9cblx0aWYgKCFjc3MgfHwgdHlwZW9mIGNzcyAhPT0gXCJzdHJpbmdcIikge1xuXHQgIHJldHVybiBjc3M7XG4gIH1cblxuICB2YXIgYmFzZVVybCA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdDtcbiAgdmFyIGN1cnJlbnREaXIgPSBiYXNlVXJsICsgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXFwvW15cXC9dKiQvLCBcIi9cIik7XG5cblx0Ly8gY29udmVydCBlYWNoIHVybCguLi4pXG5cdC8qXG5cdFRoaXMgcmVndWxhciBleHByZXNzaW9uIGlzIGp1c3QgYSB3YXkgdG8gcmVjdXJzaXZlbHkgbWF0Y2ggYnJhY2tldHMgd2l0aGluXG5cdGEgc3RyaW5nLlxuXG5cdCAvdXJsXFxzKlxcKCAgPSBNYXRjaCBvbiB0aGUgd29yZCBcInVybFwiIHdpdGggYW55IHdoaXRlc3BhY2UgYWZ0ZXIgaXQgYW5kIHRoZW4gYSBwYXJlbnNcblx0ICAgKCAgPSBTdGFydCBhIGNhcHR1cmluZyBncm91cFxuXHQgICAgICg/OiAgPSBTdGFydCBhIG5vbi1jYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAgICAgW14pKF0gID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICg/OiAgPSBTdGFydCBhbm90aGVyIG5vbi1jYXB0dXJpbmcgZ3JvdXBzXG5cdCAgICAgICAgICAgICAgICAgW14pKF0rICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIHwgID0gT1Jcblx0ICAgICAgICAgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgICAgICBbXikoXSogID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgXFwpICA9IE1hdGNoIGEgZW5kIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICApICA9IEVuZCBHcm91cFxuICAgICAgICAgICAgICAqXFwpID0gTWF0Y2ggYW55dGhpbmcgYW5kIHRoZW4gYSBjbG9zZSBwYXJlbnNcbiAgICAgICAgICApICA9IENsb3NlIG5vbi1jYXB0dXJpbmcgZ3JvdXBcbiAgICAgICAgICAqICA9IE1hdGNoIGFueXRoaW5nXG4gICAgICAgKSAgPSBDbG9zZSBjYXB0dXJpbmcgZ3JvdXBcblx0IFxcKSAgPSBNYXRjaCBhIGNsb3NlIHBhcmVuc1xuXG5cdCAvZ2kgID0gR2V0IGFsbCBtYXRjaGVzLCBub3QgdGhlIGZpcnN0LiAgQmUgY2FzZSBpbnNlbnNpdGl2ZS5cblx0ICovXG5cdHZhciBmaXhlZENzcyA9IGNzcy5yZXBsYWNlKC91cmxcXHMqXFwoKCg/OlteKShdfFxcKCg/OlteKShdK3xcXChbXikoXSpcXCkpKlxcKSkqKVxcKS9naSwgZnVuY3Rpb24oZnVsbE1hdGNoLCBvcmlnVXJsKSB7XG5cdFx0Ly8gc3RyaXAgcXVvdGVzIChpZiB0aGV5IGV4aXN0KVxuXHRcdHZhciB1bnF1b3RlZE9yaWdVcmwgPSBvcmlnVXJsXG5cdFx0XHQudHJpbSgpXG5cdFx0XHQucmVwbGFjZSgvXlwiKC4qKVwiJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KVxuXHRcdFx0LnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pO1xuXG5cdFx0Ly8gYWxyZWFkeSBhIGZ1bGwgdXJsPyBubyBjaGFuZ2Vcblx0XHRpZiAoL14oI3xkYXRhOnxodHRwOlxcL1xcL3xodHRwczpcXC9cXC98ZmlsZTpcXC9cXC9cXC98XFxzKiQpL2kudGVzdCh1bnF1b3RlZE9yaWdVcmwpKSB7XG5cdFx0ICByZXR1cm4gZnVsbE1hdGNoO1xuXHRcdH1cblxuXHRcdC8vIGNvbnZlcnQgdGhlIHVybCB0byBhIGZ1bGwgdXJsXG5cdFx0dmFyIG5ld1VybDtcblxuXHRcdGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi8vXCIpID09PSAwKSB7XG5cdFx0ICBcdC8vVE9ETzogc2hvdWxkIHdlIGFkZCBwcm90b2NvbD9cblx0XHRcdG5ld1VybCA9IHVucXVvdGVkT3JpZ1VybDtcblx0XHR9IGVsc2UgaWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiL1wiKSA9PT0gMCkge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJhc2UgdXJsXG5cdFx0XHRuZXdVcmwgPSBiYXNlVXJsICsgdW5xdW90ZWRPcmlnVXJsOyAvLyBhbHJlYWR5IHN0YXJ0cyB3aXRoICcvJ1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byBjdXJyZW50IGRpcmVjdG9yeVxuXHRcdFx0bmV3VXJsID0gY3VycmVudERpciArIHVucXVvdGVkT3JpZ1VybC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIik7IC8vIFN0cmlwIGxlYWRpbmcgJy4vJ1xuXHRcdH1cblxuXHRcdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgdXJsKC4uLilcblx0XHRyZXR1cm4gXCJ1cmwoXCIgKyBKU09OLnN0cmluZ2lmeShuZXdVcmwpICsgXCIpXCI7XG5cdH0pO1xuXG5cdC8vIHNlbmQgYmFjayB0aGUgZml4ZWQgY3NzXG5cdHJldHVybiBmaXhlZENzcztcbn07XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyXHRtZW1vaXplID0gZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRyZXR1cm4gbWVtbztcblx0fTtcbn07XG5cbnZhciBpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG5cdC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcblx0Ly8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuXHQvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcblx0Ly8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG5cdHJldHVybiB3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYjtcbn0pO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpO1xufTtcblxudmFyIGdldEVsZW1lbnQgPSAoZnVuY3Rpb24gKGZuKSB7XG5cdHZhciBtZW1vID0ge307XG5cblx0cmV0dXJuIGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0KTtcblx0XHRcdC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cdFx0XHRpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcblx0XHRcdFx0XHQvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG5cdFx0XHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0XHRcdHN0eWxlVGFyZ2V0ID0gbnVsbDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG5cdFx0fVxuXHRcdHJldHVybiBtZW1vW3RhcmdldF1cblx0fTtcbn0pKCk7XG5cbnZhciBzaW5nbGV0b24gPSBudWxsO1xudmFyXHRzaW5nbGV0b25Db3VudGVyID0gMDtcbnZhclx0c3R5bGVzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXG52YXJcdGZpeFVybHMgPSByZXF1aXJlKFwiLi91cmxzXCIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGxpc3QsIG9wdGlvbnMpIHtcblx0aWYgKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdG9wdGlvbnMuYXR0cnMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRycyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuYXR0cnMgOiB7fTtcblxuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gXCJib29sZWFuXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIDxoZWFkPiBlbGVtZW50XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnNlcnRJbnRvKSBvcHRpb25zLmluc2VydEludG8gPSBcImhlYWRcIjtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgdGhlIHRhcmdldFxuXHRpZiAoIW9wdGlvbnMuaW5zZXJ0QXQpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG5cblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlIChuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cblx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QsIG9wdGlvbnMpO1xuXHRcdFx0YWRkU3R5bGVzVG9Eb20obmV3U3R5bGVzLCBvcHRpb25zKTtcblx0XHR9XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gbWF5UmVtb3ZlW2ldO1xuXG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvciAodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cblx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59O1xuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbSAoc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cblx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMgKGxpc3QsIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdHZhciBtZWRpYSA9IGl0ZW1bMl07XG5cdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZSBuZXdTdHlsZXNbaWRdLnBhcnRzLnB1c2gocGFydCk7XG5cdH1cblxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQgKG9wdGlvbnMsIHN0eWxlKSB7XG5cdHZhciB0YXJnZXQgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50bylcblxuXHRpZiAoIXRhcmdldCkge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0SW50bycgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuXHR9XG5cblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcFtzdHlsZXNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYgKCFsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCkge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH0gZWxzZSBpZiAobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0XHR9XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlKTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0dGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcblx0fSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmluc2VydEF0LmJlZm9yZSkge1xuXHRcdHZhciBuZXh0U2libGluZyA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvICsgXCIgXCIgKyBvcHRpb25zLmluc2VydEF0LmJlZm9yZSk7XG5cdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbmV4dFNpYmxpbmcpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIltTdHlsZSBMb2FkZXJdXFxuXFxuIEludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnICgnb3B0aW9ucy5pbnNlcnRBdCcpIGZvdW5kLlxcbiBNdXN0IGJlICd0b3AnLCAnYm90dG9tJywgb3IgT2JqZWN0LlxcbiAoaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIjaW5zZXJ0YXQpXFxuXCIpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudCAoc3R5bGUpIHtcblx0aWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblx0c3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG5cblx0dmFyIGlkeCA9IHN0eWxlc0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZSk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cblx0YWRkQXR0cnMoc3R5bGUsIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGUpO1xuXG5cdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQgKG9wdGlvbnMpIHtcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXHRvcHRpb25zLmF0dHJzLnJlbCA9IFwic3R5bGVzaGVldFwiO1xuXG5cdGFkZEF0dHJzKGxpbmssIG9wdGlvbnMuYXR0cnMpO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgbGluayk7XG5cblx0cmV0dXJuIGxpbms7XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJzIChlbCwgYXR0cnMpIHtcblx0T2JqZWN0LmtleXMoYXR0cnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHRcdGVsLnNldEF0dHJpYnV0ZShrZXksIGF0dHJzW2tleV0pO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUgKG9iaiwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGUsIHVwZGF0ZSwgcmVtb3ZlLCByZXN1bHQ7XG5cblx0Ly8gSWYgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gd2FzIGRlZmluZWQsIHJ1biBpdCBvbiB0aGUgY3NzXG5cdGlmIChvcHRpb25zLnRyYW5zZm9ybSAmJiBvYmouY3NzKSB7XG5cdCAgICByZXN1bHQgPSBvcHRpb25zLnRyYW5zZm9ybShvYmouY3NzKTtcblxuXHQgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgXHQvLyBJZiB0cmFuc2Zvcm0gcmV0dXJucyBhIHZhbHVlLCB1c2UgdGhhdCBpbnN0ZWFkIG9mIHRoZSBvcmlnaW5hbCBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIHJ1bm5pbmcgcnVudGltZSB0cmFuc2Zvcm1hdGlvbnMgb24gdGhlIGNzcy5cblx0ICAgIFx0b2JqLmNzcyA9IHJlc3VsdDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICBcdC8vIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBkb24ndCBhZGQgdGhpcyBjc3MuXG5cdCAgICBcdC8vIFRoaXMgYWxsb3dzIGNvbmRpdGlvbmFsIGxvYWRpbmcgb2YgY3NzXG5cdCAgICBcdHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIFx0XHQvLyBub29wXG5cdCAgICBcdH07XG5cdCAgICB9XG5cdH1cblxuXHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcblxuXHRcdHN0eWxlID0gc2luZ2xldG9uIHx8IChzaW5nbGV0b24gPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcblxuXHR9IGVsc2UgaWYgKFxuXHRcdG9iai5zb3VyY2VNYXAgJiZcblx0XHR0eXBlb2YgVVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBCbG9iID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiXG5cdCkge1xuXHRcdHN0eWxlID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gdXBkYXRlTGluay5iaW5kKG51bGwsIHN0eWxlLCBvcHRpb25zKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXG5cdFx0XHRpZihzdHlsZS5ocmVmKSBVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlLmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlKTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuXHRcdH07XG5cdH1cblxuXHR1cGRhdGUob2JqKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUgKG5ld09iaikge1xuXHRcdGlmIChuZXdPYmopIHtcblx0XHRcdGlmIChcblx0XHRcdFx0bmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJlxuXHRcdFx0XHRuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJlxuXHRcdFx0XHRuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwXG5cdFx0XHQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcgKHN0eWxlLCBpbmRleCwgcmVtb3ZlLCBvYmopIHtcblx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXG5cdGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG5cdFx0XHRzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyAoc3R5bGUsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXG5cdGlmKG1lZGlhKSB7XG5cdFx0c3R5bGUuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdH1cblxuXHRpZihzdHlsZS5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlLmZpcnN0Q2hpbGQpIHtcblx0XHRcdHN0eWxlLnJlbW92ZUNoaWxkKHN0eWxlLmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsgKGxpbmssIG9wdGlvbnMsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0Lypcblx0XHRJZiBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgaXNuJ3QgZGVmaW5lZCwgYnV0IHNvdXJjZW1hcHMgYXJlIGVuYWJsZWRcblx0XHRhbmQgdGhlcmUgaXMgbm8gcHVibGljUGF0aCBkZWZpbmVkIHRoZW4gbGV0cyB0dXJuIGNvbnZlcnRUb0Fic29sdXRlVXJsc1xuXHRcdG9uIGJ5IGRlZmF1bHQuICBPdGhlcndpc2UgZGVmYXVsdCB0byB0aGUgY29udmVydFRvQWJzb2x1dGVVcmxzIG9wdGlvblxuXHRcdGRpcmVjdGx5XG5cdCovXG5cdHZhciBhdXRvRml4VXJscyA9IG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzID09PSB1bmRlZmluZWQgJiYgc291cmNlTWFwO1xuXG5cdGlmIChvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBhdXRvRml4VXJscykge1xuXHRcdGNzcyA9IGZpeFVybHMoY3NzKTtcblx0fVxuXG5cdGlmIChzb3VyY2VNYXApIHtcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxuXHRcdGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpICsgXCIgKi9cIjtcblx0fVxuXG5cdHZhciBibG9iID0gbmV3IEJsb2IoW2Nzc10sIHsgdHlwZTogXCJ0ZXh0L2Nzc1wiIH0pO1xuXG5cdHZhciBvbGRTcmMgPSBsaW5rLmhyZWY7XG5cblx0bGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpIFVSTC5yZXZva2VPYmplY3RVUkwob2xkU3JjKTtcbn1cbiIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih1c2VTb3VyY2VNYXApIHtcblx0dmFyIGxpc3QgPSBbXTtcblxuXHQvLyByZXR1cm4gdGhlIGxpc3Qgb2YgbW9kdWxlcyBhcyBjc3Mgc3RyaW5nXG5cdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdHZhciBjb250ZW50ID0gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApO1xuXHRcdFx0aWYoaXRlbVsyXSkge1xuXHRcdFx0XHRyZXR1cm4gXCJAbWVkaWEgXCIgKyBpdGVtWzJdICsgXCJ7XCIgKyBjb250ZW50ICsgXCJ9XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gY29udGVudDtcblx0XHRcdH1cblx0XHR9KS5qb2luKFwiXCIpO1xuXHR9O1xuXG5cdC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcblx0XHRcdG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIFwiXCJdXTtcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG5cdFx0fVxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcblx0XHRcdC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuXHRcdFx0Ly8gIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gbWVkaWFRdWVyeTtcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7XG5cdHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblx0aWYgKCFjc3NNYXBwaW5nKSB7XG5cdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdH1cblxuXHRpZiAodXNlU291cmNlTWFwICYmIHR5cGVvZiBidG9hID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0dmFyIHNvdXJjZU1hcHBpbmcgPSB0b0NvbW1lbnQoY3NzTWFwcGluZyk7XG5cdFx0dmFyIHNvdXJjZVVSTHMgPSBjc3NNYXBwaW5nLnNvdXJjZXMubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcblx0XHRcdHJldHVybiAnLyojIHNvdXJjZVVSTD0nICsgY3NzTWFwcGluZy5zb3VyY2VSb290ICsgc291cmNlICsgJyAqLydcblx0XHR9KTtcblxuXHRcdHJldHVybiBbY29udGVudF0uY29uY2F0KHNvdXJjZVVSTHMpLmNvbmNhdChbc291cmNlTWFwcGluZ10pLmpvaW4oJ1xcbicpO1xuXHR9XG5cblx0cmV0dXJuIFtjb250ZW50XS5qb2luKCdcXG4nKTtcbn1cblxuLy8gQWRhcHRlZCBmcm9tIGNvbnZlcnQtc291cmNlLW1hcCAoTUlUKVxuZnVuY3Rpb24gdG9Db21tZW50KHNvdXJjZU1hcCkge1xuXHQvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcblx0dmFyIGJhc2U2NCA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSk7XG5cdHZhciBkYXRhID0gJ3NvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCcgKyBiYXNlNjQ7XG5cblx0cmV0dXJuICcvKiMgJyArIGRhdGEgKyAnICovJztcbn1cbiIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoZmFsc2UpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyogLnN0YXJ0IHtcXHJcXG4gICAgY29sb3I6IGRhcmtyZWQ7XFxyXFxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcXHJcXG59ICovXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGVzLmNzc1wiKTtcblxuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cbnZhciB0cmFuc2Zvcm07XG52YXIgaW5zZXJ0SW50bztcblxuXG5cbnZhciBvcHRpb25zID0ge1wiaG1yXCI6dHJ1ZX1cblxub3B0aW9ucy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1cbm9wdGlvbnMuaW5zZXJ0SW50byA9IHVuZGVmaW5lZDtcblxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi4vLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2FscztcblxuaWYobW9kdWxlLmhvdCkge1xuXHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZXMuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZXMuY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==