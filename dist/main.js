!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["my-library"]=e():t["my-library"]=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(5);const r="https://todoapihost.000webhostapp.com/api/";var o={url:{getList:r+"getList.php",addTask:r+"addTask.php",updateTask:r+"updateTask.php",deleteTask:r+"deleteTask.php"},priority:{1:"",2:"table-success",3:"table-info",4:"table-warning",5:"table-danger"}};var i=class{static getTasksFromServer(){return new Promise((t,e)=>{let n=new XMLHttpRequest;const r=o.url.getList;n.open("GET",r,!0),n.onload=function(){t(JSON.parse(this.response))},n.onerror=function(){e("Error: connection failed.")},n.send()})}static removeTaskFromServer(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.deleteTask;r.open("DELETE",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to delete the item.")},r.send(JSON.stringify({id:t}))})}static updateTask(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.updateTask;r.open("PUT",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to update the task.")},r.send(JSON.stringify(t))})}static addTask(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.addTask;r.open("POST",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to add new task.")},r.send(JSON.stringify(t))})}};var s=class{constructor(t,e,n,r,o){this.id=t,this.title=e,this.details=n,this.priority=r,this.isDone=o,this.id=t,this.title=e,this.details=n,this.priority=r,this.isDone=o}render(t,e,n){const r=document.createElement("tr");return 0==this.isDone?(r.setAttribute("class",`${o.priority[this.priority]}`),r.setAttribute("data-id",`${this.id}`),r.innerHTML=`\n                <th scope="row">${t}</th>\n                <td>${this.title}</td>\n                <td>${this.details}</td>\n                <td>${this.priority}</td>\n                <td><input class="form-check-input" type="checkbox"></td>\n                <td class="edit"><img src="img/pencil_and_paper-512.png" width="24" height="24"></td>\n                <td class="remove"><img src="img/Trash_Can-512.png" width="24" height="24"></td>\n            `,e.appendChild(r),!1):(r.innerHTML=`\n                <li class="list-group-item d-flex justify-content-between align-items-center completed" data-id="${this.id}">\n                    ${this.title}\n                </li>\n            `,n.appendChild(r),!0)}},a=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})};const c=t=>{i.updateTask(t).then(t=>{const e=new h;console.log(t),e.render()}).catch(t=>{console.log(t)})},d=function(t,e){const n=e.find(e=>e.id===t);n.isDone="1",i.updateTask(n).then(t=>{console.log(t),(new h).render()}).catch(t=>{console.log(t)})},l=function(t,e){const n=e.find(e=>e.id===t);n.isDone="0",i.updateTask(n).then(t=>{console.log(t),(new h).render()}).catch(t=>{console.log(t)})};var u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})};const p=function(t){const e=new h;i.removeTaskFromServer(t).then(t=>{console.log(t),e.render()}).catch(t=>{console.log(t)})},f=function(t){return u(this,void 0,void 0,function*(){const e=new h;t.forEach((n,r)=>{i.removeTaskFromServer(n).then(n=>{console.log(n),r+1===t.length&&e.render()}).catch(t=>{console.log(t)})})})};var h=class{constructor(t){this.form=new v,this.completed=[],t&&this.render()}storeCompleted(){document.querySelectorAll(".completed").forEach(t=>{const e=parseInt(t.getAttribute("data-id"));this.completed.push(e)})}bindEdit(t){const e=this;document.querySelectorAll(".edit").forEach(n=>{n.addEventListener("click",function(){const n=this.parentElement.getAttribute("data-id"),r=t.find(t=>t.id===n);e.form.enableEdit(r)})})}bindRemove(){document.querySelectorAll(".remove").forEach(t=>{t.addEventListener("click",function(){const t=this.parentElement.getAttribute("data-id");p(t)})})}bindCheckbox(t){document.querySelectorAll(".form-check-input").forEach(e=>{e.addEventListener("click",function(){const e=this.parentElement.parentElement.getAttribute("data-id");d(e,t)})})}bindCompletedTasks(t){document.querySelectorAll(".completed").forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-id");l(e,t)})})}renderClearButton(){const t=document.createElement("button");t.classList.add("btn","btn-primary","col-4","h-25"),t.innerHTML="Clear",t.addEventListener("click",t=>{f(this.completed)}),document.getElementById("completed").appendChild(t)}render(){(function(){return a(this,void 0,void 0,function*(){return yield i.getTasksFromServer().then(function(t){let e=1;const n=document.getElementById("tasks"),r=document.getElementById("completed");n.innerHTML="",r.innerHTML="",t.forEach(t=>{(t=new s(t.id,t.title,t.details,t.priority,t.isDone)).render(e,n,r)||e++})}).catch(t=>{console.log(t)}),i.getTasksFromServer()})})().then(t=>{this.bindEdit(t),this.bindRemove(),this.bindCheckbox(t),this.bindCompletedTasks(t),this.storeCompleted(),this.renderClearButton()})}};const m=t=>{const e=new h;i.addTask(t).then(t=>{console.log(t),e.render()}).catch(t=>{console.log(t)})};var v=class{constructor(t){this.container=document.getElementById("form"),this.defaultTask={title:"",details:"",priority:1,id:""},t&&this.render({mode:"Add",task:this.defaultTask})}setInputs(){this.title=document.getElementById("title"),this.details=document.getElementById("details"),this.priority=document.getElementById("priority"),this.submit=document.getElementById("submit")}bindAdd(){this.submit.addEventListener("click",t=>{t.preventDefault(),m(this.getInputValues()),this.render({mode:"Add",task:this.defaultTask})})}bindEdit(){this.submit.addEventListener("click",t=>{t.preventDefault(),c(this.getInputValues()),this.render({mode:"Add",task:this.defaultTask})})}getInputValues(){return{title:this.title.value,details:this.details.value,priority:this.priority.value,isDone:0,id:this.submit.getAttribute("data-id")}}renderCancelButton(){const t=document.createElement("button");t.classList.add("btn","btn-primary","col-4","h-25"),t.innerHTML="Cancel",t.addEventListener("click",t=>{t.preventDefault(),this.render({mode:"Add",task:this.defaultTask})}),this.container.appendChild(t)}render(t){this.container.innerHTML="";const e=document.createElement("fieldset");e.innerHTML=`\n            <h5>${t.mode} task:</h5>\n                <div class="form-group">\n                    <label class="col-form-label" for="title">Title:</label>\n                    <input type="text" class="form-control" placeholder="Enter note title" id="title" value="${t.task.title}">\n                </div>\n                <div class="form-group">\n                    <label for="details">Additional details (optional):</label>\n                    <textarea class="form-control" id="details" rows="3">${t.task.details}</textarea>\n                </div>\n                <div class="row">\n                    <div class="form-group col-3">\n                        <select class="form-control" id="priority" value="${t.task.priority}">\n                            <option value="1">1</option>\n                            <option value="2">2</option>\n                            <option value="3">3</option>\n                            <option value="4">4</option>\n                            <option value="5">5</option>\n                        </select>\n                        <label for="priority">Priority</label>\n                    </div>\n                    <div class="col-5"></div>\n                    <button type="submit" class="btn btn-primary col-4 h-25" id="submit" data-id="${t.task.id}">${t.mode}</button>\n                </div>\n            `,this.container.appendChild(e),this.setInputs(),"Add"===t.mode?this.bindAdd():(this.bindEdit(),this.renderCancelButton())}enableEdit(t){this.render({mode:"Edit",task:t})}};document.addEventListener("DOMContentLoaded",()=>{!function(){console.log("Initializing...");new h(!0),new v(!0)}()})},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r,o,i={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,d=0,l=[],u=n(1);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(y(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(y(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function h(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),l.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var s=d++;n=c||(c=v(e)),r=w.bind(null,n,s,!1),o=w.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return p(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o];(a=i[s.id]).refs--,r.push(a)}t&&p(f(t,e),e);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}};var g,k=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function w(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=k(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"/* .start {\r\n    color: darkred;\r\n    text-align: center;\r\n} */",""])},function(t,e,n){var r=n(4);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(t.exports=r.locals)}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvdXRpbHMvY29uZmlnLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvU2VydmVyLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvVGFzay50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL21vZHVsZXMvZWRpdFRhc2sudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9tb2R1bGVzL3JlbW92ZVRhc2sudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9MaXN0LnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvbW9kdWxlcy9nZXRUYXNrcy50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL21vZHVsZXMvYWRkVGFzay50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL0Zvcm0udHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9tYWluLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvc3R5bGVzL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9zdHlsZXMvc3R5bGVzLmNzcz84ZDc5Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInNlcnZlciIsInV0aWxzX2NvbmZpZyIsInVybCIsImdldExpc3QiLCJhZGRUYXNrIiwidXBkYXRlVGFzayIsImRlbGV0ZVRhc2siLCJwcmlvcml0eSIsIjEiLCIyIiwiMyIsIjQiLCI1Iiwic3JjX1NlcnZlciIsIltvYmplY3QgT2JqZWN0XSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwidGhpcyIsInJlc3BvbnNlIiwib25lcnJvciIsInNlbmQiLCJpZCIsInN0cmluZ2lmeSIsInRhc2siLCJzcmNfVGFzayIsInRpdGxlIiwiZGV0YWlscyIsImlzRG9uZSIsImluZGV4IiwiaW5jb21wbGV0ZSIsImNvbXBsZXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJlZGl0VGFzayIsInRoZW4iLCJsaXN0Iiwic3JjX0xpc3QiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyIiwiY2F0Y2giLCJlcnIiLCJtYXJrVGFza0FzRG9uZSIsInRhc2tzIiwiZmluZCIsInVuZG9Db21wbGV0ZWQiLCJyZW1vdmVUYXNrIiwicmVtb3ZlVGFza0Zyb21TZXJ2ZXIiLCJyZW1vdmVDb21wbGV0ZWQiLCJmb3JFYWNoIiwibGVuZ3RoIiwiaW5pdCIsImZvcm0iLCJzcmNfRm9ybSIsImNvbXBsZXRlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsInB1c2giLCJ0YXNrTGlzdCIsInRoYXQiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwicGFyZW50RWxlbWVudCIsImVuYWJsZUVkaXQiLCJjbGVhciIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJnZXRFbGVtZW50QnlJZCIsImdldFRhc2tzRnJvbVNlcnZlciIsIml0ZW1zIiwiaXRlbSIsImdldFRhc2tzIiwiYmluZEVkaXQiLCJiaW5kUmVtb3ZlIiwiYmluZENoZWNrYm94IiwiYmluZENvbXBsZXRlZFRhc2tzIiwic3RvcmVDb21wbGV0ZWQiLCJyZW5kZXJDbGVhckJ1dHRvbiIsImNvbnRhaW5lciIsImRlZmF1bHRUYXNrIiwibW9kZSIsInN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJjYW5jZWwiLCJwcm9wIiwic2V0SW5wdXRzIiwiYmluZEFkZCIsInJlbmRlckNhbmNlbEJ1dHRvbiIsInNyY19pbml0IiwiY3NzIiwibG9jYXRpb24iLCJFcnJvciIsImJhc2VVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJjdXJyZW50RGlyIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiZnVsbE1hdGNoIiwib3JpZ1VybCIsIm5ld1VybCIsInVucXVvdGVkT3JpZ1VybCIsInRyaW0iLCIkMSIsInRlc3QiLCJpbmRleE9mIiwiZm4iLCJtZW1vIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0RWxlbWVudCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJtZWRpYSIsInNvdXJjZU1hcCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImtleSIsIm9iaiIsInVwZGF0ZSIsInJlbW92ZSIsInJlc3VsdCIsInRyYW5zZm9ybSIsInN0eWxlSW5kZXgiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiYmluZCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJidG9hIiwibGluayIsInJlbCIsImNyZWF0ZUxpbmtFbGVtZW50IiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsImNzc05vZGUiLCJjaGlsZE5vZGVzIiwidXNlU291cmNlTWFwIiwidG9TdHJpbmciLCJtYXAiLCJjb250ZW50IiwiY3NzTWFwcGluZyIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJobXIiLCJsb2NhbHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsY0FBQUQsSUFFQUQsRUFBQSxjQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUCxRQUdBLElBQUFDLEVBQUFJLEVBQUFFLElBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVQsWUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMkNBLE9BdENBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFBZSxJQUNBRyxPQUFBQyxlQUFBbkIsRUFBQWUsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFWLEVBQUFpQixFQUFBLFNBQUF2QixHQUNBa0IsT0FBQUMsZUFBQW5CLEVBQUEsY0FBaUR3QixPQUFBLEtBSWpEbEIsRUFBQW1CLEVBQUEsU0FBQXhCLEdBQ0EsSUFBQWUsRUFBQWYsS0FBQXlCLFdBQ0EsV0FBMkIsT0FBQXpCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUssRUFBQVEsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxH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LE9BQUFBLEVBQUEsYUFBQThJLEVBQUEsS0FFQW5MLEVBQUF1QixLQUFBYyxNQUlBckMscUJDOUNBN0UsRUFBQUQsUUFBQU0sRUFBQSxFQUFBQSxFQUFBLElBS0ErRixNQUFBcEcsRUFBQU8sRUFBQSx3RUFBNEYsc0JDSjVGLElBQUFnUCxFQUFBbFAsRUFBQSxHQUVBLGlCQUFBa1AsUUFBQXZQLEVBQUFPLEVBQUFnUCxFQUFBLE1BT0EsSUFBQTNFLEdBQWVzRixLQUFBLEVBRWZoRCxlQVBBQSxFQVFBeEIsZ0JBQUFhLEdBRUFsTSxFQUFBLEVBQUFBLENBQUFrUCxFQUFBM0UsR0FFQTJFLEVBQUFZLFNBQUFuUSxFQUFBRCxRQUFBd1AsRUFBQVkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIm15LWxpYnJhcnlcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wibXktbGlicmFyeVwiXSA9IGZhY3RvcnkoKTtcbn0pKHdpbmRvdywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IHNlcnZlciA9IFwiaHR0cHM6Ly90b2RvYXBpaG9zdC4wMDB3ZWJob3N0YXBwLmNvbS9hcGkvXCI7XHJcblxyXG5jb25zdCBjb25maWc6IGFueSA9IHtcclxuICAgIHVybDoge1xyXG4gICAgICAgIGdldExpc3Q6IHNlcnZlciArIFwiZ2V0TGlzdC5waHBcIixcclxuICAgICAgICBhZGRUYXNrOiBzZXJ2ZXIgKyBcImFkZFRhc2sucGhwXCIsXHJcbiAgICAgICAgdXBkYXRlVGFzazogc2VydmVyICsgXCJ1cGRhdGVUYXNrLnBocFwiLFxyXG4gICAgICAgIGRlbGV0ZVRhc2s6IHNlcnZlciArIFwiZGVsZXRlVGFzay5waHBcIlxyXG4gICAgfSxcclxuICAgIHByaW9yaXR5OiB7XHJcbiAgICAgICAgMTogXCJcIixcclxuICAgICAgICAyOiBcInRhYmxlLXN1Y2Nlc3NcIixcclxuICAgICAgICAzOiBcInRhYmxlLWluZm9cIixcclxuICAgICAgICA0OiBcInRhYmxlLXdhcm5pbmdcIixcclxuICAgICAgICA1OiBcInRhYmxlLWRhbmdlclwiXHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25maWc7IiwiaW1wb3J0IGNvbmZpZyBmcm9tICcuL3V0aWxzL2NvbmZpZyc7XHJcblxyXG5jbGFzcyBTZXJ2ZXIge1xyXG4gICAgc3RhdGljIGdldFRhc2tzRnJvbVNlcnZlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9ICdHRVQnO1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBjb25maWcudXJsLmdldExpc3Q7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XHJcblxyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3I6IGNvbm5lY3Rpb24gZmFpbGVkLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlbW92ZVRhc2tGcm9tU2VydmVyKGlkOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9ICdERUxFVEUnO1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBjb25maWcudXJsLmRlbGV0ZVRhc2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGFzeW5jID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vcGVuKG1ldGhvZCwgdXJsLCBhc3luYyk7XHJcblxyXG4gICAgICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHRoaXMucmVzcG9uc2UpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgnRXJyb3I6IGZhaWxlZCB0byBkZWxldGUgdGhlIGl0ZW0uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoeyBpZDogaWQgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB1cGRhdGVUYXNrKHRhc2s6IG9iamVjdCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gJ1BVVCc7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGNvbmZpZy51cmwudXBkYXRlVGFzaztcclxuICAgICAgICAgICAgY29uc3QgYXN5bmMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIGFzeW5jKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCdFcnJvcjogZmFpbGVkIHRvIHVwZGF0ZSB0aGUgdGFzay4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh0YXNrKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGFkZFRhc2sodGFzazogb2JqZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSAnUE9TVCc7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGNvbmZpZy51cmwuYWRkVGFzaztcclxuICAgICAgICAgICAgY29uc3QgYXN5bmMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIGFzeW5jKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCdFcnJvcjogZmFpbGVkIHRvIGFkZCBuZXcgdGFzay4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh0YXNrKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlcnZlcjsiLCJpbXBvcnQgY29uZmlnIGZyb20gJy4vdXRpbHMvY29uZmlnJztcclxuXHJcbmNsYXNzIFRhc2sge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgcHJpdmF0ZSBpZDogbnVtYmVyLFxyXG4gICAgICAgIHByaXZhdGUgdGl0bGU6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIGRldGFpbHM6IHN0cmluZyxcclxuICAgICAgICBwcml2YXRlIHByaW9yaXR5OiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSBpc0RvbmU6IGJvb2xlYW4pIHtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuZGV0YWlscyA9IGRldGFpbHM7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gICAgICAgIHRoaXMuaXNEb25lID0gaXNEb25lO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihpbmRleDogbnVtYmVyLCBpbmNvbXBsZXRlOiBhbnksIGNvbXBsZXRlOiBhbnkpIHtcclxuICAgICAgICBjb25zdCB0YXNrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcclxuICAgICAgICBpZiAodGhpcy5pc0RvbmUgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdGFzay5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgYCR7Y29uZmlnLnByaW9yaXR5W3RoaXMucHJpb3JpdHldfWApO1xyXG4gICAgICAgICAgICB0YXNrLnNldEF0dHJpYnV0ZSgnZGF0YS1pZCcsIGAke3RoaXMuaWR9YCk7XHJcbiAgICAgICAgICAgIHRhc2suaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPHRoIHNjb3BlPVwicm93XCI+JHtpbmRleH08L3RoPlxyXG4gICAgICAgICAgICAgICAgPHRkPiR7dGhpcy50aXRsZX08L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkPiR7dGhpcy5kZXRhaWxzfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+JHt0aGlzLnByaW9yaXR5fTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+PGlucHV0IGNsYXNzPVwiZm9ybS1jaGVjay1pbnB1dFwiIHR5cGU9XCJjaGVja2JveFwiPjwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJlZGl0XCI+PGltZyBzcmM9XCJpbWcvcGVuY2lsX2FuZF9wYXBlci01MTIucG5nXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCI+PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInJlbW92ZVwiPjxpbWcgc3JjPVwiaW1nL1RyYXNoX0Nhbi01MTIucG5nXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCI+PC90ZD5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgaW5jb21wbGV0ZS5hcHBlbmRDaGlsZCh0YXNrKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRhc2suaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbiBhbGlnbi1pdGVtcy1jZW50ZXIgY29tcGxldGVkXCIgZGF0YS1pZD1cIiR7dGhpcy5pZH1cIj5cclxuICAgICAgICAgICAgICAgICAgICAke3RoaXMudGl0bGV9XHJcbiAgICAgICAgICAgICAgICA8L2xpPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICBjb21wbGV0ZS5hcHBlbmRDaGlsZCh0YXNrKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUYXNrO1xyXG4iLCJpbXBvcnQgU2VydmVyIGZyb20gJy4uL1NlcnZlcic7XHJcbmltcG9ydCBMaXN0IGZyb20gJy4uL0xpc3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRUYXNrID0gKHRhc2s6IG9iamVjdCkgPT4ge1xyXG5cclxuICAgIFNlcnZlci51cGRhdGVUYXNrKHRhc2spXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBsaXN0LnJlbmRlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IG1hcmtUYXNrQXNEb25lID0gZnVuY3Rpb24gKGlkOiBudW1iZXIsIHRhc2tzOiBhbnkpIHtcclxuXHJcbiAgICBjb25zdCB0YXNrID0gdGFza3MuZmluZCgodGFzazogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRhc2suaWQgPT09IGlkO1xyXG4gICAgfSk7XHJcbiAgICB0YXNrLmlzRG9uZSA9IFwiMVwiO1xyXG4gICAgU2VydmVyLnVwZGF0ZVRhc2sodGFzaylcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gbmV3IExpc3Q7XHJcbiAgICAgICAgICAgIGxpc3QucmVuZGVyKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgdW5kb0NvbXBsZXRlZCA9IGZ1bmN0aW9uIChpZDogbnVtYmVyLCB0YXNrczogYW55KSB7XHJcblxyXG4gICAgY29uc3QgdGFzayA9IHRhc2tzLmZpbmQoKHRhc2s6IGFueSkgPT4ge1xyXG4gICAgICAgIHJldHVybiB0YXNrLmlkID09PSBpZDtcclxuICAgIH0pO1xyXG4gICAgdGFzay5pc0RvbmUgPSBcIjBcIjtcclxuICAgIFNlcnZlci51cGRhdGVUYXNrKHRhc2spXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0O1xyXG4gICAgICAgICAgICBsaXN0LnJlbmRlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufSIsImltcG9ydCBTZXJ2ZXIgZnJvbSAnLi4vU2VydmVyJztcclxuaW1wb3J0IExpc3QgZnJvbSAnLi4vTGlzdCc7XHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlVGFzayA9IGZ1bmN0aW9uIChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IExpc3Q7XHJcblxyXG4gICAgU2VydmVyLnJlbW92ZVRhc2tGcm9tU2VydmVyKGlkKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIGxpc3QucmVuZGVyKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVtb3ZlQ29tcGxldGVkID0gYXN5bmMgZnVuY3Rpb24gKHRhc2tzOiBudW1iZXJbXSkge1xyXG4gICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0O1xyXG5cclxuICAgIHRhc2tzLmZvckVhY2goKHRhc2ssIGluZGV4KSA9PiB7XHJcbiAgICAgICAgU2VydmVyLnJlbW92ZVRhc2tGcm9tU2VydmVyKHRhc2spXHJcbiAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICsgMSA9PT0gdGFza3MubGVuZ3RoKSBsaXN0LnJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH0pXHJcblxyXG59IiwiaW1wb3J0IEZvcm0gZnJvbSAnLi9Gb3JtJztcclxuaW1wb3J0IHsgZ2V0VGFza3MgfSBmcm9tICcuL21vZHVsZXMvZ2V0VGFza3MnO1xyXG5pbXBvcnQgeyBtYXJrVGFza0FzRG9uZSwgdW5kb0NvbXBsZXRlZCB9IGZyb20gJy4vbW9kdWxlcy9lZGl0VGFzayc7XHJcbmltcG9ydCB7IHJlbW92ZVRhc2ssIHJlbW92ZUNvbXBsZXRlZCB9IGZyb20gJy4vbW9kdWxlcy9yZW1vdmVUYXNrJztcclxuXHJcbmNsYXNzIExpc3Qge1xyXG4gICAgcHJpdmF0ZSBmb3JtID0gbmV3IEZvcm07XHJcbiAgICBwcml2YXRlIGNvbXBsZXRlZDogbnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihpbml0PzogYm9vbGVhbikge1xyXG4gICAgICAgIGlmIChpbml0KSB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3RvcmVDb21wbGV0ZWQoKSB7XHJcbiAgICAgICAgY29uc3QgdGFza3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tcGxldGVkJyk7XHJcbiAgICAgICAgdGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpZDogbnVtYmVyID0gcGFyc2VJbnQodGFzay5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcGxldGVkLnB1c2goaWQpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kRWRpdCh0YXNrTGlzdDogYW55KSB7XHJcbiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lZGl0Jyk7XHJcbiAgICAgICAgYnRucy5mb3JFYWNoKChidG4pID0+IHtcclxuICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQ6IG51bWJlciA9IHRoaXMucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2sgPSB0YXNrTGlzdC5maW5kKCh0YXNrOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFzay5pZCA9PT0gaWQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoYXQuZm9ybS5lbmFibGVFZGl0KHRhc2spO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRSZW1vdmUoKSB7XHJcbiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5yZW1vdmUnKTtcclxuICAgICAgICBidG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZDogbnVtYmVyID0gdGhpcy5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlVGFzayhpZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZENoZWNrYm94KHRhc2tMaXN0OiBvYmplY3QpIHtcclxuICAgICAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm0tY2hlY2staW5wdXQnKTtcclxuICAgICAgICBidG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZDogbnVtYmVyID0gdGhpcy5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgICAgICBtYXJrVGFza0FzRG9uZShpZCwgdGFza0xpc3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRDb21wbGV0ZWRUYXNrcyh0YXNrTGlzdDogb2JqZWN0KSB7XHJcbiAgICAgICAgY29uc3QgYnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZWQnKTtcclxuICAgICAgICBidG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZDogbnVtYmVyID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgICAgIHVuZG9Db21wbGV0ZWQoaWQsIHRhc2tMaXN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJDbGVhckJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBjbGVhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGNsZWFyLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tcHJpbWFyeScsICdjb2wtNCcsICdoLTI1Jyk7XHJcbiAgICAgICAgY2xlYXIuaW5uZXJIVE1MID0gJ0NsZWFyJztcclxuICAgICAgICBjbGVhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbW92ZUNvbXBsZXRlZCh0aGlzLmNvbXBsZXRlZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBsZXRlZCcpLmFwcGVuZENoaWxkKGNsZWFyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGdldFRhc2tzKCkudGhlbigodGFza0xpc3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5iaW5kRWRpdCh0YXNrTGlzdCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZFJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRDaGVja2JveCh0YXNrTGlzdCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZENvbXBsZXRlZFRhc2tzKHRhc2tMaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5zdG9yZUNvbXBsZXRlZCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNsZWFyQnV0dG9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IExpc3Q7XHJcbiIsImltcG9ydCBTZXJ2ZXIgZnJvbSAnLi4vU2VydmVyJztcclxuaW1wb3J0IFRhc2sgZnJvbSAnLi4vVGFzayc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VGFza3MoKSB7XHJcbiAgICBhd2FpdCBTZXJ2ZXIuZ2V0VGFza3NGcm9tU2VydmVyKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbiAoaXRlbXM6IG9iamVjdFtdKSB7XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXIgPSAxO1xyXG4gICAgICAgICAgICBjb25zdCBpbmNvbXBsZXRlOiBhbnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza3MnKTtcclxuICAgICAgICAgICAgY29uc3QgY29tcGxldGU6IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wbGV0ZWQnKTtcclxuICAgICAgICAgICAgaW5jb21wbGV0ZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgY29tcGxldGUuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBUYXNrKGl0ZW0uaWQsIGl0ZW0udGl0bGUsIGl0ZW0uZGV0YWlscywgaXRlbS5wcmlvcml0eSwgaXRlbS5pc0RvbmUpO1xyXG4gICAgICAgICAgICAgICAgIWl0ZW0ucmVuZGVyKGksIGluY29tcGxldGUsIGNvbXBsZXRlKSA/IGkrKyA6IGk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIHJldHVybiBTZXJ2ZXIuZ2V0VGFza3NGcm9tU2VydmVyKCk7XHJcbn0iLCJpbXBvcnQgU2VydmVyIGZyb20gJy4uL1NlcnZlcic7XHJcbmltcG9ydCBMaXN0IGZyb20gJy4uL0xpc3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZFRhc2sgPSAodGFzazogb2JqZWN0KSA9PiB7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IExpc3Q7XHJcblxyXG4gICAgU2VydmVyLmFkZFRhc2sodGFzaylcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBsaXN0LnJlbmRlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxufSIsImltcG9ydCB7IGFkZFRhc2sgfSBmcm9tICcuL21vZHVsZXMvYWRkVGFzayc7XHJcbmltcG9ydCB7IGVkaXRUYXNrIH0gZnJvbSAnLi9tb2R1bGVzL2VkaXRUYXNrJztcclxuXHJcbmludGVyZmFjZSBSZW5kZXJPcHRpb25zIHtcclxuICAgIG1vZGU6ICdBZGQnIHwgJ0VkaXQnO1xyXG4gICAgdGFzaz86IHtcclxuICAgICAgICB0aXRsZT86IHN0cmluZztcclxuICAgICAgICBkZXRhaWxzPzogc3RyaW5nO1xyXG4gICAgICAgIHByaW9yaXR5PzogbnVtYmVyO1xyXG4gICAgICAgIGlkPzogbnVtYmVyO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY2xhc3MgRm9ybSB7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtJyk7XHJcbiAgICBwcml2YXRlIHRpdGxlOiBhbnk7XHJcbiAgICBwcml2YXRlIGRldGFpbHM6IGFueTtcclxuICAgIHByaXZhdGUgcHJpb3JpdHk6IGFueTtcclxuICAgIHByaXZhdGUgc3VibWl0OiBhbnk7XHJcbiAgICBwcml2YXRlIGRlZmF1bHRUYXNrOiBvYmplY3QgPSB7XHJcbiAgICAgICAgdGl0bGU6IFwiXCIsXHJcbiAgICAgICAgZGV0YWlsczogXCJcIixcclxuICAgICAgICBwcmlvcml0eTogMSxcclxuICAgICAgICBpZDogXCJcIlxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluaXQ/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGluaXQpIHRoaXMucmVuZGVyKHsgbW9kZTogJ0FkZCcsIHRhc2s6IHRoaXMuZGVmYXVsdFRhc2sgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXRJbnB1dHMoKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpO1xyXG4gICAgICAgIHRoaXMuZGV0YWlscyA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzJyk7XHJcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpO1xyXG4gICAgICAgIHRoaXMuc3VibWl0ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZEFkZCgpIHtcclxuICAgICAgICB0aGlzLnN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWRkVGFzayh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih7IG1vZGU6ICdBZGQnLCB0YXNrOiB0aGlzLmRlZmF1bHRUYXNrIH0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRFZGl0KCkge1xyXG4gICAgICAgIHRoaXMuc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBlZGl0VGFzayh0aGlzLmdldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih7IG1vZGU6ICdBZGQnLCB0YXNrOiB0aGlzLmRlZmF1bHRUYXNrIH0pO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IHRpdGxlID0gdGhpcy50aXRsZS52YWx1ZTtcclxuICAgICAgICBjb25zdCBkZXRhaWxzID0gdGhpcy5kZXRhaWxzLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gdGhpcy5wcmlvcml0eS52YWx1ZTtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuc3VibWl0LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgICAgIHJldHVybiB7IHRpdGxlLCBkZXRhaWxzLCBwcmlvcml0eSwgaXNEb25lOiAwLCBpZCB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJDYW5jZWxCdXR0b24oKSB7XHJcbiAgICAgICAgY29uc3QgY2FuY2VsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgY2FuY2VsLmNsYXNzTGlzdC5hZGQoJ2J0bicsICdidG4tcHJpbWFyeScsICdjb2wtNCcsICdoLTI1Jyk7XHJcbiAgICAgICAgY2FuY2VsLmlubmVySFRNTCA9ICdDYW5jZWwnO1xyXG4gICAgICAgIGNhbmNlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoeyBtb2RlOiAnQWRkJywgdGFzazogdGhpcy5kZWZhdWx0VGFzayB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihwcm9wOiBSZW5kZXJPcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWVsZHNldCcpO1xyXG4gICAgICAgIGZvcm0uaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8aDU+JHtwcm9wLm1vZGV9IHRhc2s6PC9oNT5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiY29sLWZvcm0tbGFiZWxcIiBmb3I9XCJ0aXRsZVwiPlRpdGxlOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBwbGFjZWhvbGRlcj1cIkVudGVyIG5vdGUgdGl0bGVcIiBpZD1cInRpdGxlXCIgdmFsdWU9XCIke3Byb3AudGFzay50aXRsZX1cIj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZGV0YWlsc1wiPkFkZGl0aW9uYWwgZGV0YWlscyAob3B0aW9uYWwpOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRleHRhcmVhIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJkZXRhaWxzXCIgcm93cz1cIjNcIj4ke3Byb3AudGFzay5kZXRhaWxzfTwvdGV4dGFyZWE+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cCBjb2wtM1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0IGNsYXNzPVwiZm9ybS1jb250cm9sXCIgaWQ9XCJwcmlvcml0eVwiIHZhbHVlPVwiJHtwcm9wLnRhc2sucHJpb3JpdHl9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMVwiPjE8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIyXCI+Mjwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjNcIj4zPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNFwiPjQ8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI1XCI+NTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NlbGVjdD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cInByaW9yaXR5XCI+UHJpb3JpdHk8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtNVwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5IGNvbC00IGgtMjVcIiBpZD1cInN1Ym1pdFwiIGRhdGEtaWQ9XCIke3Byb3AudGFzay5pZH1cIj4ke3Byb3AubW9kZX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGZvcm0pO1xyXG5cclxuICAgICAgICB0aGlzLnNldElucHV0cygpO1xyXG5cclxuICAgICAgICBpZiAocHJvcC5tb2RlID09PSAnQWRkJykge1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRBZGQoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFZGl0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2FuY2VsQnV0dG9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBlbmFibGVFZGl0KHRhc2s6IG9iamVjdCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyKHsgbW9kZTogJ0VkaXQnLCB0YXNrOiB0YXNrIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtOyIsImltcG9ydCAnLi9zdHlsZXMvc3R5bGVzLmNzcyc7XHJcbmltcG9ydCB7IGluaXQgfSBmcm9tICcuL2luZGV4JztcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcclxuICAgIGluaXQoKTtcclxufSkiLCJpbXBvcnQgRm9ybSBmcm9tICcuL0Zvcm0nO1xyXG5pbXBvcnQgTGlzdCBmcm9tICcuL0xpc3QnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6aW5nLi4uJyk7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IExpc3QodHJ1ZSk7XHJcbiAgICBjb25zdCBmb3JtID0gbmV3IEZvcm0odHJ1ZSk7XHJcbn0iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG59O1xuXG52YXIgZ2V0RWxlbWVudCA9IChmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW8gPSB7fTtcblxuXHRyZXR1cm4gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgcGFzc2luZyBmdW5jdGlvbiBpbiBvcHRpb25zLCB0aGVuIHVzZSBpdCBmb3IgcmVzb2x2ZSBcImhlYWRcIiBlbGVtZW50LlxuICAgICAgICAgICAgICAgIC8vIFVzZWZ1bCBmb3IgU2hhZG93IFJvb3Qgc3R5bGUgaS5lXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIC8vICAgaW5zZXJ0SW50bzogZnVuY3Rpb24gKCkgeyByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb29cIikuc2hhZG93Um9vdCB9XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHR2YXIgc3R5bGVUYXJnZXQgPSBnZXRUYXJnZXQuY2FsbCh0aGlzLCB0YXJnZXQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8gKyBcIiBcIiArIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRhZGRBdHRycyhzdHlsZSwgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZSk7XG5cblx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXG5cdGlmKG9wdGlvbnMuYXR0cnMudHlwZSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0b3B0aW9ucy5hdHRycy50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHR9XG5cdG9wdGlvbnMuYXR0cnMucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cblx0YWRkQXR0cnMobGluaywgb3B0aW9ucy5hdHRycyk7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rKTtcblxuXHRyZXR1cm4gbGluaztcbn1cblxuZnVuY3Rpb24gYWRkQXR0cnMgKGVsLCBhdHRycykge1xuXHRPYmplY3Qua2V5cyhhdHRycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0ZWwuc2V0QXR0cmlidXRlKGtleSwgYXR0cnNba2V5XSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpO1xuXG5cdCAgICBpZiAocmVzdWx0KSB7XG5cdCAgICBcdC8vIElmIHRyYW5zZm9ybSByZXR1cm5zIGEgdmFsdWUsIHVzZSB0aGF0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgcnVubmluZyBydW50aW1lIHRyYW5zZm9ybWF0aW9ucyBvbiB0aGUgY3NzLlxuXHQgICAgXHRvYmouY3NzID0gcmVzdWx0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgIFx0Ly8gSWYgdGhlIHRyYW5zZm9ybSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIGRvbid0IGFkZCB0aGlzIGNzcy5cblx0ICAgIFx0Ly8gVGhpcyBhbGxvd3MgY29uZGl0aW9uYWwgbG9hZGluZyBvZiBjc3Ncblx0ICAgIFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdC8vIG5vb3Bcblx0ICAgIFx0fTtcblx0ICAgIH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXG5cdFx0c3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cblx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuXG5cdH0gZWxzZSBpZiAoXG5cdFx0b2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCJcblx0KSB7XG5cdFx0c3R5bGUgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cblx0XHRcdGlmKHN0eWxlLmhyZWYpIFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGUuaHJlZik7XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZSA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZSAobmV3T2JqKSB7XG5cdFx0aWYgKG5ld09iaikge1xuXHRcdFx0aWYgKFxuXHRcdFx0XHRuZXdPYmouY3NzID09PSBvYmouY3NzICYmXG5cdFx0XHRcdG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmXG5cdFx0XHRcdG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXBcblx0XHRcdCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZW1vdmUoKTtcblx0XHR9XG5cdH07XG59XG5cbnZhciByZXBsYWNlVGV4dCA9IChmdW5jdGlvbiAoKSB7XG5cdHZhciB0ZXh0U3RvcmUgPSBbXTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gKGluZGV4LCByZXBsYWNlbWVudCkge1xuXHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblxuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyAoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0fSBlbHNlIHtcblx0XHR2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG5cdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlLmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlLmFwcGVuZENoaWxkKGNzc05vZGUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBhcHBseVRvVGFnIChzdHlsZSwgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cblx0aWYobWVkaWEpIHtcblx0XHRzdHlsZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlLnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdH0gZWxzZSB7XG5cdFx0d2hpbGUoc3R5bGUuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG5cdFx0fVxuXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTGluayAobGluaywgb3B0aW9ucywgb2JqKSB7XG5cdHZhciBjc3MgPSBvYmouY3NzO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHQvKlxuXHRcdElmIGNvbnZlcnRUb0Fic29sdXRlVXJscyBpc24ndCBkZWZpbmVkLCBidXQgc291cmNlbWFwcyBhcmUgZW5hYmxlZFxuXHRcdGFuZCB0aGVyZSBpcyBubyBwdWJsaWNQYXRoIGRlZmluZWQgdGhlbiBsZXRzIHR1cm4gY29udmVydFRvQWJzb2x1dGVVcmxzXG5cdFx0b24gYnkgZGVmYXVsdC4gIE90aGVyd2lzZSBkZWZhdWx0IHRvIHRoZSBjb252ZXJ0VG9BYnNvbHV0ZVVybHMgb3B0aW9uXG5cdFx0ZGlyZWN0bHlcblx0Ki9cblx0dmFyIGF1dG9GaXhVcmxzID0gb3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgPT09IHVuZGVmaW5lZCAmJiBzb3VyY2VNYXA7XG5cblx0aWYgKG9wdGlvbnMuY29udmVydFRvQWJzb2x1dGVVcmxzIHx8IGF1dG9GaXhVcmxzKSB7XG5cdFx0Y3NzID0gZml4VXJscyhjc3MpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xuXHR9XG5cblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XG5cblx0dmFyIG9sZFNyYyA9IGxpbmsuaHJlZjtcblxuXHRsaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXG5cdGlmKG9sZFNyYykgVVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHVzZVNvdXJjZU1hcCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0dmFyIGNvbnRlbnQgPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCk7XG5cdFx0XHRpZihpdGVtWzJdKSB7XG5cdFx0XHRcdHJldHVybiBcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGNvbnRlbnQgKyBcIn1cIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBjb250ZW50O1xuXHRcdFx0fVxuXHRcdH0pLmpvaW4oXCJcIik7XG5cdH07XG5cblx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3Rcblx0bGlzdC5pID0gZnVuY3Rpb24obW9kdWxlcywgbWVkaWFRdWVyeSkge1xuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xuXHRcdHZhciBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzID0ge307XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XG5cdFx0XHRpZih0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIpXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHR9XG5cdFx0Zm9yKGkgPSAwOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxuXHRcdFx0Ly8gdGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBub3QgMTAwJSBwZXJmZWN0IGZvciB3ZWlyZCBtZWRpYSBxdWVyeSBjb21iaW5hdGlvbnNcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxuXHRcdFx0aWYodHlwZW9mIGl0ZW1bMF0gIT09IFwibnVtYmVyXCIgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xuXHRcdFx0XHR9IGVsc2UgaWYobWVkaWFRdWVyeSkge1xuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRsaXN0LnB1c2goaXRlbSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRyZXR1cm4gbGlzdDtcbn07XG5cbmZ1bmN0aW9uIGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKSB7XG5cdHZhciBjb250ZW50ID0gaXRlbVsxXSB8fCAnJztcblx0dmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuXHRpZiAoIWNzc01hcHBpbmcpIHtcblx0XHRyZXR1cm4gY29udGVudDtcblx0fVxuXG5cdGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcblx0XHR2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcblx0XHR2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0cmV0dXJuICcvKiMgc291cmNlVVJMPScgKyBjc3NNYXBwaW5nLnNvdXJjZVJvb3QgKyBzb3VyY2UgKyAnICovJ1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIFtjb250ZW50XS5jb25jYXQoc291cmNlVVJMcykuY29uY2F0KFtzb3VyY2VNYXBwaW5nXSkuam9pbignXFxuJyk7XG5cdH1cblxuXHRyZXR1cm4gW2NvbnRlbnRdLmpvaW4oJ1xcbicpO1xufVxuXG4vLyBBZGFwdGVkIGZyb20gY29udmVydC1zb3VyY2UtbWFwIChNSVQpXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG5cdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuXHR2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcblx0dmFyIGRhdGEgPSAnc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsJyArIGJhc2U2NDtcblxuXHRyZXR1cm4gJy8qIyAnICsgZGF0YSArICcgKi8nO1xufVxuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKShmYWxzZSk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiAuc3RhcnQge1xcclxcbiAgICBjb2xvcjogZGFya3JlZDtcXHJcXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn0gKi9cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG4iLCJcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zdHlsZXMuY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3N0eWxlcy5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3N0eWxlcy5jc3NcIik7XG5cblx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblxuXHRcdHZhciBsb2NhbHMgPSAoZnVuY3Rpb24oYSwgYikge1xuXHRcdFx0dmFyIGtleSwgaWR4ID0gMDtcblxuXHRcdFx0Zm9yKGtleSBpbiBhKSB7XG5cdFx0XHRcdGlmKCFiIHx8IGFba2V5XSAhPT0gYltrZXldKSByZXR1cm4gZmFsc2U7XG5cdFx0XHRcdGlkeCsrO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3Ioa2V5IGluIGIpIGlkeC0tO1xuXG5cdFx0XHRyZXR1cm4gaWR4ID09PSAwO1xuXHRcdH0oY29udGVudC5sb2NhbHMsIG5ld0NvbnRlbnQubG9jYWxzKSk7XG5cblx0XHRpZighbG9jYWxzKSB0aHJvdyBuZXcgRXJyb3IoJ0Fib3J0aW5nIENTUyBITVIgZHVlIHRvIGNoYW5nZWQgY3NzLW1vZHVsZXMgbG9jYWxzLicpO1xuXG5cdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHR9KTtcblxuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn0iXSwic291cmNlUm9vdCI6IiJ9