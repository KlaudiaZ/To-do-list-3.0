!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["my-library"]=e():t["my-library"]=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(5);const r="http://localhost:3000/FRONT_END/To-do-list-3.0/server/api/";var o={url:{getList:r+"getList.php",addTask:r+"addTask.php",updateTask:r+"updateTask.php",deleteTask:r+"deleteTask.php"},priority:{1:"",2:"table-success",3:"table-info",4:"table-warning",5:"table-danger"}};var i=class{static getTasksFromServer(){return new Promise((t,e)=>{let n=new XMLHttpRequest;const r=o.url.getList;n.open("GET",r,!0),n.onload=function(){t(JSON.parse(this.response))},n.onerror=function(){e("Error: connection failed.")},n.send()})}static removeTaskFromServer(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.deleteTask;r.open("DELETE",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to delete the item.")},r.send(JSON.stringify({id:t}))})}static updateTask(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.updateTask;r.open("PUT",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to update the task.")},r.send(JSON.stringify(t))})}static addTask(t){return new Promise((e,n)=>{let r=new XMLHttpRequest;const i=o.url.addTask;r.open("POST",i,!0),r.onload=function(){e(JSON.parse(this.response))},r.onerror=function(){n("Error: failed to add new task.")},r.send(JSON.stringify(t))})}};var s=class{constructor(t,e,n,r,o){this.id=t,this.title=e,this.details=n,this.priority=r,this.isDone=o,this.id=t,this.title=e,this.details=n,this.priority=r,this.isDone=o}render(t,e,n){const r=document.createElement("tr");return 0==this.isDone?(r.setAttribute("class",`${o.priority[this.priority]}`),r.setAttribute("data-id",`${this.id}`),r.innerHTML=`\n                <th scope="row">${t}</th>\n                <td>${this.title}</td>\n                <td>${this.details}</td>\n                <td>${this.priority}</td>\n                <td><input class="form-check-input" type="checkbox"></td>\n                <td class="edit"><img src="img/pencil_and_paper-512.png" width="24" height="24"></td>\n                <td class="remove"><img src="img/Trash_Can-512.png" width="24" height="24"></td>\n            `,e.appendChild(r),!1):(r.innerHTML=`\n                <li class="list-group-item d-flex justify-content-between align-items-center completed" data-id="${this.id}">\n                    ${this.title}\n                </li>\n            `,n.appendChild(r),!0)}},a=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})};const c=t=>{i.updateTask(t).then(t=>{const e=new h;console.log(t),e.render()}).catch(t=>{console.log(t)})},l=function(t,e){const n=e.find(e=>e.id===t);n.isDone="1",i.updateTask(n).then(t=>{console.log(t),(new h).render()}).catch(t=>{console.log(t)})},d=function(t,e){const n=e.find(e=>e.id===t);n.isDone="0",i.updateTask(n).then(t=>{console.log(t),(new h).render()}).catch(t=>{console.log(t)})};var u=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(s,a)}c((r=r.apply(t,e||[])).next())})};const p=function(t){const e=new h;i.removeTaskFromServer(t).then(t=>{console.log(t),e.render()}).catch(t=>{console.log(t)})},f=function(t){return u(this,void 0,void 0,function*(){const e=new h;t.forEach((n,r)=>{i.removeTaskFromServer(n).then(n=>{console.log(n),r+1===t.length&&e.render()}).catch(t=>{console.log(t)})})})};var h=class{constructor(t){this.form=new v,this.completed=[],t&&this.render()}storeCompleted(){document.querySelectorAll(".completed").forEach(t=>{const e=parseInt(t.getAttribute("data-id"));this.completed.push(e)})}bindEdit(t){const e=this;document.querySelectorAll(".edit").forEach(n=>{n.addEventListener("click",function(){const n=this.parentElement.getAttribute("data-id"),r=t.find(t=>t.id===n);e.form.enableEdit(r)})})}bindRemove(){document.querySelectorAll(".remove").forEach(t=>{t.addEventListener("click",function(){const t=this.parentElement.getAttribute("data-id");p(t)})})}bindCheckbox(t){document.querySelectorAll(".form-check-input").forEach(e=>{e.addEventListener("click",function(){const e=this.parentElement.parentElement.getAttribute("data-id");l(e,t)})})}bindCompletedTasks(t){document.querySelectorAll(".completed").forEach(e=>{e.addEventListener("click",function(){const e=this.getAttribute("data-id");d(e,t)})})}renderClearButton(){const t=document.createElement("button");t.classList.add("btn","btn-primary","col-4","h-25"),t.innerHTML="Clear",t.addEventListener("click",t=>{f(this.completed)}),document.getElementById("completed").appendChild(t)}render(){(function(){return a(this,void 0,void 0,function*(){let t=[];return yield i.getTasksFromServer().then(function(e){let n=1;const r=document.getElementById("tasks"),o=document.getElementById("completed");r.innerHTML="",o.innerHTML="",e.forEach(t=>{(t=new s(t.id,t.title,t.details,t.priority,t.isDone)).render(n,r,o)||n++}),t=e}).catch(t=>{console.log(t)}),new Promise(e=>{e(t)})})})().then(t=>{this.bindEdit(t),this.bindRemove(),this.bindCheckbox(t),this.bindCompletedTasks(t),this.storeCompleted(),this.renderClearButton()})}};const m=t=>{const e=new h;i.addTask(t).then(t=>{console.log(t),e.render()}).catch(t=>{console.log(t)})};var v=class{constructor(t){this.container=document.getElementById("form"),this.defaultTask={title:"",details:"",priority:1,id:""},t&&this.render({mode:"Add",task:this.defaultTask})}setInputs(){this.title=document.getElementById("title"),this.details=document.getElementById("details"),this.priority=document.getElementById("priority"),this.submit=document.getElementById("submit")}bindAdd(){this.submit.addEventListener("click",t=>{t.preventDefault(),m(this.getInputValues()),this.render({mode:"Add",task:this.defaultTask})})}bindEdit(){this.submit.addEventListener("click",t=>{t.preventDefault(),c(this.getInputValues()),this.render({mode:"Add",task:this.defaultTask})})}getInputValues(){return{title:this.title.value,details:this.details.value,priority:this.priority.value,isDone:0,id:this.submit.getAttribute("data-id")}}renderCancelButton(){const t=document.createElement("button");t.classList.add("btn","btn-primary","col-4","h-25"),t.innerHTML="Cancel",t.addEventListener("click",t=>{t.preventDefault(),this.render({mode:"Add",task:this.defaultTask})}),this.container.appendChild(t)}render(t){this.container.innerHTML="";const e=document.createElement("fieldset");e.innerHTML=`\n            <h5>${t.mode} task:</h5>\n                <div class="form-group">\n                    <label class="col-form-label" for="title">Title:</label>\n                    <input type="text" class="form-control" placeholder="Enter note title" id="title" value="${t.task.title}">\n                </div>\n                <div class="form-group">\n                    <label for="details">Additional details (optional):</label>\n                    <textarea class="form-control" id="details" rows="3">${t.task.details}</textarea>\n                </div>\n                <div class="row">\n                    <div class="form-group col-3">\n                        <select class="form-control" id="priority" value="${t.task.priority}">\n                            <option value="1">1</option>\n                            <option value="2">2</option>\n                            <option value="3">3</option>\n                            <option value="4">4</option>\n                            <option value="5">5</option>\n                        </select>\n                        <label for="priority">Priority</label>\n                    </div>\n                    <div class="col-5"></div>\n                    <button type="submit" class="btn btn-primary col-4 h-25" id="submit" data-id="${t.task.id}">${t.mode}</button>\n                </div>\n            `,this.container.appendChild(e),this.setInputs(),"Add"===t.mode?this.bindAdd():(this.bindEdit(),this.renderCancelButton())}enableEdit(t){this.render({mode:"Edit",task:t})}};document.addEventListener("DOMContentLoaded",()=>{!function(){console.log("Initializing...");new h(!0),new v(!0)}()})},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var o,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){var r,o,i={},s=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),a=function(t){var e={};return function(t){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),c=null,l=0,d=[],u=n(1);function p(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=i[r.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](r.parts[s]);for(;s<r.parts.length;s++)o.parts.push(y(r.parts[s],e))}else{var a=[];for(s=0;s<r.parts.length;s++)a.push(y(r.parts[s],e));i[r.id]={id:r.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],r={},o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};r[s]?r[s].parts.push(a):n.push(r[s]={id:s,parts:[a]})}return n}function h(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),d.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=d.indexOf(t);e>=0&&d.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),b(e,t.attrs),h(t,e),e}function b(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function y(t,e){var n,r,o,i;if(e.transform&&t.css){if(!(i=e.transform(t.css)))return function(){};t.css=i}if(e.singleton){var s=l++;n=c||(c=v(e)),r=k.bind(null,n,s,!1),o=k.bind(null,n,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),h(t,e),e}(e),r=function(t,e,n){var r=n.css,o=n.sourceMap,i=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||i)&&(r=u(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([r],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=s()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=f(t,e);return p(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o];(a=i[s.id]).refs--,r.push(a)}t&&p(f(t,e),e);for(o=0;o<r.length;o++){var a;if(0===(a=r[o]).refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete i[a.id]}}}};var g,w=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function k(t,e,n,r){var o=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(i,s[e]):t.appendChild(i)}}},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(s=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[n].concat(i).concat([o]).join("\n")}var s;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"/* .start {\r\n    color: darkred;\r\n    text-align: center;\r\n} */",""])},function(t,e,n){var r=n(4);"string"==typeof r&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(2)(r,o);r.locals&&(t.exports=r.locals)}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9teS1saWJyYXJ5L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvdXRpbHMvY29uZmlnLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvU2VydmVyLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvVGFzay50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL21vZHVsZXMvZWRpdFRhc2sudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9tb2R1bGVzL3JlbW92ZVRhc2sudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9MaXN0LnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvbW9kdWxlcy9nZXRUYXNrcy50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL21vZHVsZXMvYWRkVGFzay50cyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vc3JjL0Zvcm0udHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9tYWluLnRzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qcyIsIndlYnBhY2s6Ly9teS1saWJyYXJ5Ly4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzIiwid2VicGFjazovL215LWxpYnJhcnkvLi9zcmMvc3R5bGVzL3N0eWxlcy5jc3MiLCJ3ZWJwYWNrOi8vbXktbGlicmFyeS8uL3NyYy9zdHlsZXMvc3R5bGVzLmNzcz84ZDc5Il0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsIndpbmRvdyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInNlcnZlciIsInV0aWxzX2NvbmZpZyIsInVybCIsImdldExpc3QiLCJhZGRUYXNrIiwidXBkYXRlVGFzayIsImRlbGV0ZVRhc2siLCJwcmlvcml0eSIsIjEiLCIyIiwiMyIsIjQiLCI1Iiwic3JjX1NlcnZlciIsIltvYmplY3QgT2JqZWN0XSIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwiSlNPTiIsInBhcnNlIiwidGhpcyIsInJlc3BvbnNlIiwib25lcnJvciIsInNlbmQiLCJpZCIsInN0cmluZ2lmeSIsInRhc2siLCJzcmNfVGFzayIsInRpdGxlIiwiZGV0YWlscyIsImlzRG9uZSIsImluZGV4IiwiaW5jb21wbGV0ZSIsImNvbXBsZXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJlZGl0VGFzayIsInRoZW4iLCJsaXN0Iiwic3JjX0xpc3QiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyIiwiY2F0Y2giLCJlcnIiLCJtYXJrVGFza0FzRG9uZSIsInRhc2tzIiwiZmluZCIsInVuZG9Db21wbGV0ZWQiLCJyZW1vdmVUYXNrIiwicmVtb3ZlVGFza0Zyb21TZXJ2ZXIiLCJyZW1vdmVDb21wbGV0ZWQiLCJmb3JFYWNoIiwibGVuZ3RoIiwiaW5pdCIsImZvcm0iLCJzcmNfRm9ybSIsImNvbXBsZXRlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsInB1c2giLCJ0YXNrTGlzdCIsInRoYXQiLCJidG4iLCJhZGRFdmVudExpc3RlbmVyIiwicGFyZW50RWxlbWVudCIsImVuYWJsZUVkaXQiLCJjbGVhciIsImNsYXNzTGlzdCIsImFkZCIsImUiLCJnZXRFbGVtZW50QnlJZCIsInJlc3VsdCIsImdldFRhc2tzRnJvbVNlcnZlciIsIml0ZW1zIiwiaXRlbSIsImdldFRhc2tzIiwiYmluZEVkaXQiLCJiaW5kUmVtb3ZlIiwiYmluZENoZWNrYm94IiwiYmluZENvbXBsZXRlZFRhc2tzIiwic3RvcmVDb21wbGV0ZWQiLCJyZW5kZXJDbGVhckJ1dHRvbiIsImNvbnRhaW5lciIsImRlZmF1bHRUYXNrIiwibW9kZSIsInN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwiZ2V0SW5wdXRWYWx1ZXMiLCJjYW5jZWwiLCJwcm9wIiwic2V0SW5wdXRzIiwiYmluZEFkZCIsInJlbmRlckNhbmNlbEJ1dHRvbiIsInNyY19pbml0IiwiY3NzIiwibG9jYXRpb24iLCJFcnJvciIsImJhc2VVcmwiLCJwcm90b2NvbCIsImhvc3QiLCJjdXJyZW50RGlyIiwicGF0aG5hbWUiLCJyZXBsYWNlIiwiZnVsbE1hdGNoIiwib3JpZ1VybCIsIm5ld1VybCIsInVucXVvdGVkT3JpZ1VybCIsInRyaW0iLCIkMSIsInRlc3QiLCJpbmRleE9mIiwiZm4iLCJtZW1vIiwic3R5bGVzSW5Eb20iLCJpc09sZElFIiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0RWxlbWVudCIsInRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInNpbmdsZXRvbiIsInNpbmdsZXRvbkNvdW50ZXIiLCJzdHlsZXNJbnNlcnRlZEF0VG9wIiwiZml4VXJscyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJtZWRpYSIsInNvdXJjZU1hcCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiaW5zZXJ0SW50byIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJzcGxpY2UiLCJjcmVhdGVTdHlsZUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJhdHRycyIsInR5cGUiLCJhZGRBdHRycyIsImVsIiwia2V5cyIsImtleSIsIm9iaiIsInVwZGF0ZSIsInJlbW92ZSIsInRyYW5zZm9ybSIsInN0eWxlSW5kZXgiLCJhcHBseVRvU2luZ2xldG9uVGFnIiwiYmluZCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJidG9hIiwibGluayIsInJlbCIsImNyZWF0ZUxpbmtFbGVtZW50IiwiYXV0b0ZpeFVybHMiLCJjb252ZXJ0VG9BYnNvbHV0ZVVybHMiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsImNzc05vZGUiLCJjaGlsZE5vZGVzIiwidXNlU291cmNlTWFwIiwidG9TdHJpbmciLCJtYXAiLCJjb250ZW50IiwiY3NzTWFwcGluZyIsInNvdXJjZU1hcHBpbmciLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJjb25jYXQiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibWVkaWFRdWVyeSIsImFscmVhZHlJbXBvcnRlZE1vZHVsZXMiLCJobXIiLCJsb2NhbHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELFVBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsY0FBQUQsSUFFQUQsRUFBQSxjQUFBQyxJQVJBLENBU0NLLE9BQUEsV0FDRCxtQkNUQSxJQUFBQyxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUCxRQUdBLElBQUFDLEVBQUFJLEVBQUFFLElBQ0FDLEVBQUFELEVBQ0FFLEdBQUEsRUFDQVQsWUFVQSxPQU5BVSxFQUFBSCxHQUFBSSxLQUFBVixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTSxHQUdBTCxFQUFBUSxHQUFBLEVBR0FSLEVBQUFELFFBMkNBLE9BdENBTSxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFkLEVBQUFlLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFqQixFQUFBZSxJQUNBRyxPQUFBQyxlQUFBbkIsRUFBQWUsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFWLEVBQUFpQixFQUFBLFNBQUF2QixHQUNBa0IsT0FBQUMsZUFBQW5CLEVBQUEsY0FBaUR3QixPQUFBLEtBSWpEbEIsRUFBQW1CLEVBQUEsU0FBQXhCLEdBQ0EsSUFBQWUsRUFBQWYsS0FBQXlCLFdBQ0EsV0FBMkIsT0FBQXpCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUssRUFBQVEsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxH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QUFBN0ksRUFBQSxHQUNBQSxFQUFBLEdBQUE2SSxFQUNLQSxJQUNMN0ksRUFBQSxPQUFBQSxFQUFBLGFBQUE2SSxFQUFBLEtBRUFuTCxFQUFBdUIsS0FBQWUsTUFJQXRDLHFCQzlDQTdFLEVBQUFELFFBQUFNLEVBQUEsRUFBQUEsRUFBQSxJQUtBK0YsTUFBQXBHLEVBQUFPLEVBQUEsd0VBQTRGLHNCQ0o1RixJQUFBZ1AsRUFBQWxQLEVBQUEsR0FFQSxpQkFBQWtQLFFBQUF2UCxFQUFBTyxFQUFBZ1AsRUFBQSxNQU9BLElBQUExRSxHQUFlcUYsS0FBQSxFQUVmaEQsZUFQQUEsRUFRQXZCLGdCQUFBYSxHQUVBbk0sRUFBQSxFQUFBQSxDQUFBa1AsRUFBQTFFLEdBRUEwRSxFQUFBWSxTQUFBblEsRUFBQUQsUUFBQXdQLEVBQUFZIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJteS1saWJyYXJ5XCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIm15LWxpYnJhcnlcIl0gPSBmYWN0b3J5KCk7XG59KSh3aW5kb3csIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBzZXJ2ZXIgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9GUk9OVF9FTkQvVG8tZG8tbGlzdC0zLjAvc2VydmVyL2FwaS9cIjtcclxuXHJcbmNvbnN0IGNvbmZpZzogYW55ID0ge1xyXG4gICAgdXJsOiB7XHJcbiAgICAgICAgZ2V0TGlzdDogc2VydmVyICsgXCJnZXRMaXN0LnBocFwiLFxyXG4gICAgICAgIGFkZFRhc2s6IHNlcnZlciArIFwiYWRkVGFzay5waHBcIixcclxuICAgICAgICB1cGRhdGVUYXNrOiBzZXJ2ZXIgKyBcInVwZGF0ZVRhc2sucGhwXCIsXHJcbiAgICAgICAgZGVsZXRlVGFzazogc2VydmVyICsgXCJkZWxldGVUYXNrLnBocFwiXHJcbiAgICB9LFxyXG4gICAgcHJpb3JpdHk6IHtcclxuICAgICAgICAxOiBcIlwiLFxyXG4gICAgICAgIDI6IFwidGFibGUtc3VjY2Vzc1wiLFxyXG4gICAgICAgIDM6IFwidGFibGUtaW5mb1wiLFxyXG4gICAgICAgIDQ6IFwidGFibGUtd2FybmluZ1wiLFxyXG4gICAgICAgIDU6IFwidGFibGUtZGFuZ2VyXCJcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbmZpZzsiLCJpbXBvcnQgY29uZmlnIGZyb20gJy4vdXRpbHMvY29uZmlnJztcclxuXHJcbmNsYXNzIFNlcnZlciB7XHJcbiAgICBzdGF0aWMgZ2V0VGFza3NGcm9tU2VydmVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gJ0dFVCc7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGNvbmZpZy51cmwuZ2V0TGlzdDtcclxuICAgICAgICAgICAgY29uc3QgYXN5bmMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIGFzeW5jKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCdFcnJvcjogY29ubmVjdGlvbiBmYWlsZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVtb3ZlVGFza0Zyb21TZXJ2ZXIoaWQ6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgY29uc3QgbWV0aG9kID0gJ0RFTEVURSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGNvbmZpZy51cmwuZGVsZXRlVGFzaztcclxuICAgICAgICAgICAgY29uc3QgYXN5bmMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9wZW4obWV0aG9kLCB1cmwsIGFzeW5jKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCdFcnJvcjogZmFpbGVkIHRvIGRlbGV0ZSB0aGUgaXRlbS4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7IGlkOiBpZCB9KSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHVwZGF0ZVRhc2sodGFzazogb2JqZWN0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBtZXRob2QgPSAnUFVUJztcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gY29uZmlnLnVybC51cGRhdGVUYXNrO1xyXG4gICAgICAgICAgICBjb25zdCBhc3luYyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoJ0Vycm9yOiBmYWlsZWQgdG8gdXBkYXRlIHRoZSB0YXNrLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHRhc2spKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgYWRkVGFzayh0YXNrOiBvYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1ldGhvZCA9ICdQT1NUJztcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gY29uZmlnLnVybC5hZGRUYXNrO1xyXG4gICAgICAgICAgICBjb25zdCBhc3luYyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICB4aHIub3BlbihtZXRob2QsIHVybCwgYXN5bmMpO1xyXG5cclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoJ0Vycm9yOiBmYWlsZWQgdG8gYWRkIG5ldyB0YXNrLicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHRhc2spKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2VydmVyOyIsImltcG9ydCBjb25maWcgZnJvbSAnLi91dGlscy9jb25maWcnO1xyXG5cclxuY2xhc3MgVGFzayB7XHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgICAgICBwcml2YXRlIGlkOiBudW1iZXIsXHJcbiAgICAgICAgcHJpdmF0ZSB0aXRsZTogc3RyaW5nLFxyXG4gICAgICAgIHByaXZhdGUgZGV0YWlsczogc3RyaW5nLFxyXG4gICAgICAgIHByaXZhdGUgcHJpb3JpdHk6IG51bWJlcixcclxuICAgICAgICBwcml2YXRlIGlzRG9uZTogYm9vbGVhbikge1xyXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcclxuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgICAgICAgdGhpcy5pc0RvbmUgPSBpc0RvbmU7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyKGluZGV4OiBudW1iZXIsIGluY29tcGxldGU6IGFueSwgY29tcGxldGU6IGFueSkge1xyXG4gICAgICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRG9uZSA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0YXNrLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBgJHtjb25maWcucHJpb3JpdHlbdGhpcy5wcmlvcml0eV19YCk7XHJcbiAgICAgICAgICAgIHRhc2suc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgYCR7dGhpcy5pZH1gKTtcclxuICAgICAgICAgICAgdGFzay5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8dGggc2NvcGU9XCJyb3dcIj4ke2luZGV4fTwvdGg+XHJcbiAgICAgICAgICAgICAgICA8dGQ+JHt0aGlzLnRpdGxlfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICA8dGQ+JHt0aGlzLmRldGFpbHN9PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD4ke3RoaXMucHJpb3JpdHl9PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZD48aW5wdXQgY2xhc3M9XCJmb3JtLWNoZWNrLWlucHV0XCIgdHlwZT1cImNoZWNrYm94XCI+PC90ZD5cclxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImVkaXRcIj48aW1nIHNyYz1cImltZy9wZW5jaWxfYW5kX3BhcGVyLTUxMi5wbmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIj48L3RkPlxyXG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwicmVtb3ZlXCI+PGltZyBzcmM9XCJpbWcvVHJhc2hfQ2FuLTUxMi5wbmdcIiB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIj48L3RkPlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICBpbmNvbXBsZXRlLmFwcGVuZENoaWxkKHRhc2spO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFzay5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW0gZC1mbGV4IGp1c3RpZnktY29udGVudC1iZXR3ZWVuIGFsaWduLWl0ZW1zLWNlbnRlciBjb21wbGV0ZWRcIiBkYXRhLWlkPVwiJHt0aGlzLmlkfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICR7dGhpcy50aXRsZX1cclxuICAgICAgICAgICAgICAgIDwvbGk+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgIGNvbXBsZXRlLmFwcGVuZENoaWxkKHRhc2spO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFRhc2s7XHJcbiIsImltcG9ydCBTZXJ2ZXIgZnJvbSAnLi4vU2VydmVyJztcclxuaW1wb3J0IExpc3QgZnJvbSAnLi4vTGlzdCc7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdFRhc2sgPSAodGFzazogb2JqZWN0KSA9PiB7XHJcblxyXG4gICAgU2VydmVyLnVwZGF0ZVRhc2sodGFzaylcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbGlzdCA9IG5ldyBMaXN0O1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIGxpc3QucmVuZGVyKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgbWFya1Rhc2tBc0RvbmUgPSBmdW5jdGlvbiAoaWQ6IG51bWJlciwgdGFza3M6IGFueSkge1xyXG5cclxuICAgIGNvbnN0IHRhc2sgPSB0YXNrcy5maW5kKCh0YXNrOiBhbnkpID0+IHtcclxuICAgICAgICByZXR1cm4gdGFzay5pZCA9PT0gaWQ7XHJcbiAgICB9KTtcclxuICAgIHRhc2suaXNEb25lID0gXCIxXCI7XHJcbiAgICBTZXJ2ZXIudXBkYXRlVGFzayh0YXNrKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdDtcclxuICAgICAgICAgICAgbGlzdC5yZW5kZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB1bmRvQ29tcGxldGVkID0gZnVuY3Rpb24gKGlkOiBudW1iZXIsIHRhc2tzOiBhbnkpIHtcclxuXHJcbiAgICBjb25zdCB0YXNrID0gdGFza3MuZmluZCgodGFzazogYW55KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRhc2suaWQgPT09IGlkO1xyXG4gICAgfSk7XHJcbiAgICB0YXNrLmlzRG9uZSA9IFwiMFwiO1xyXG4gICAgU2VydmVyLnVwZGF0ZVRhc2sodGFzaylcclxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBjb25zdCBsaXN0ID0gbmV3IExpc3Q7XHJcbiAgICAgICAgICAgIGxpc3QucmVuZGVyKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG59IiwiaW1wb3J0IFNlcnZlciBmcm9tICcuLi9TZXJ2ZXInO1xyXG5pbXBvcnQgTGlzdCBmcm9tICcuLi9MaXN0JztcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVUYXNrID0gZnVuY3Rpb24gKGlkOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdDtcclxuXHJcbiAgICBTZXJ2ZXIucmVtb3ZlVGFza0Zyb21TZXJ2ZXIoaWQpXHJcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgbGlzdC5yZW5kZXIoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVDb21wbGV0ZWQgPSBhc3luYyBmdW5jdGlvbiAodGFza3M6IG51bWJlcltdKSB7XHJcbiAgICBjb25zdCBsaXN0ID0gbmV3IExpc3Q7XHJcblxyXG4gICAgdGFza3MuZm9yRWFjaCgodGFzaywgaW5kZXgpID0+IHtcclxuICAgICAgICBTZXJ2ZXIucmVtb3ZlVGFza0Zyb21TZXJ2ZXIodGFzaylcclxuICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggKyAxID09PSB0YXNrcy5sZW5ndGgpIGxpc3QucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfSlcclxuXHJcbn0iLCJpbXBvcnQgRm9ybSBmcm9tICcuL0Zvcm0nO1xyXG5pbXBvcnQgeyBnZXRUYXNrcyB9IGZyb20gJy4vbW9kdWxlcy9nZXRUYXNrcyc7XHJcbmltcG9ydCB7IG1hcmtUYXNrQXNEb25lLCB1bmRvQ29tcGxldGVkIH0gZnJvbSAnLi9tb2R1bGVzL2VkaXRUYXNrJztcclxuaW1wb3J0IHsgcmVtb3ZlVGFzaywgcmVtb3ZlQ29tcGxldGVkIH0gZnJvbSAnLi9tb2R1bGVzL3JlbW92ZVRhc2snO1xyXG5cclxuY2xhc3MgTGlzdCB7XHJcbiAgICBwcml2YXRlIGZvcm0gPSBuZXcgRm9ybTtcclxuICAgIHByaXZhdGUgY29tcGxldGVkOiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluaXQ/OiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKGluaXQpIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdG9yZUNvbXBsZXRlZCgpIHtcclxuICAgICAgICBjb25zdCB0YXNrcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wbGV0ZWQnKTtcclxuICAgICAgICB0YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkOiBudW1iZXIgPSBwYXJzZUludCh0YXNrLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcclxuICAgICAgICAgICAgdGhpcy5jb21wbGV0ZWQucHVzaChpZCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJpbmRFZGl0KHRhc2tMaXN0OiBhbnkpIHtcclxuICAgICAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgICAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmVkaXQnKTtcclxuICAgICAgICBidG5zLmZvckVhY2goKGJ0bikgPT4ge1xyXG4gICAgICAgICAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpZDogbnVtYmVyID0gdGhpcy5wYXJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFzayA9IHRhc2tMaXN0LmZpbmQoKHRhc2s6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrLmlkID09PSBpZDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhhdC5mb3JtLmVuYWJsZUVkaXQodGFzayk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZFJlbW92ZSgpIHtcclxuICAgICAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlbW92ZScpO1xyXG4gICAgICAgIGJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkOiBudW1iZXIgPSB0aGlzLnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVUYXNrKGlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kQ2hlY2tib3godGFza0xpc3Q6IG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IGJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jaGVjay1pbnB1dCcpO1xyXG4gICAgICAgIGJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkOiBudW1iZXIgPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgICAgIG1hcmtUYXNrQXNEb25lKGlkLCB0YXNrTGlzdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZENvbXBsZXRlZFRhc2tzKHRhc2tMaXN0OiBvYmplY3QpIHtcclxuICAgICAgICBjb25zdCBidG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbXBsZXRlZCcpO1xyXG4gICAgICAgIGJ0bnMuZm9yRWFjaCgoYnRuKSA9PiB7XHJcbiAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlkOiBudW1iZXIgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xyXG4gICAgICAgICAgICAgICAgdW5kb0NvbXBsZXRlZChpZCwgdGFza0xpc3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckNsZWFyQnV0dG9uKCkge1xyXG4gICAgICAgIGNvbnN0IGNsZWFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgY2xlYXIuY2xhc3NMaXN0LmFkZCgnYnRuJywgJ2J0bi1wcmltYXJ5JywgJ2NvbC00JywgJ2gtMjUnKTtcclxuICAgICAgICBjbGVhci5pbm5lckhUTUwgPSAnQ2xlYXInO1xyXG4gICAgICAgIGNsZWFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgcmVtb3ZlQ29tcGxldGVkKHRoaXMuY29tcGxldGVkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGxldGVkJykuYXBwZW5kQ2hpbGQoY2xlYXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgZ2V0VGFza3MoKS50aGVuKCh0YXNrTGlzdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRFZGl0KHRhc2tMaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5iaW5kUmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZENoZWNrYm94KHRhc2tMaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5iaW5kQ29tcGxldGVkVGFza3ModGFza0xpc3QpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JlQ29tcGxldGVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ2xlYXJCdXR0b24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGlzdDtcclxuIiwiaW1wb3J0IFNlcnZlciBmcm9tICcuLi9TZXJ2ZXInO1xyXG5pbXBvcnQgVGFzayBmcm9tICcuLi9UYXNrJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUYXNrcygpIHtcclxuICAgIGxldCByZXN1bHQ6IG9iamVjdFtdID0gW107XHJcbiAgICBhd2FpdCBTZXJ2ZXIuZ2V0VGFza3NGcm9tU2VydmVyKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbiAoaXRlbXM6IG9iamVjdFtdKSB7XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXIgPSAxO1xyXG4gICAgICAgICAgICBjb25zdCBpbmNvbXBsZXRlOiBhbnkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFza3MnKTtcclxuICAgICAgICAgICAgY29uc3QgY29tcGxldGU6IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21wbGV0ZWQnKTtcclxuICAgICAgICAgICAgaW5jb21wbGV0ZS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgY29tcGxldGUuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaXRlbSA9IG5ldyBUYXNrKGl0ZW0uaWQsIGl0ZW0udGl0bGUsIGl0ZW0uZGV0YWlscywgaXRlbS5wcmlvcml0eSwgaXRlbS5pc0RvbmUpO1xyXG4gICAgICAgICAgICAgICAgIWl0ZW0ucmVuZGVyKGksIGluY29tcGxldGUsIGNvbXBsZXRlKSA/IGkrKyA6IGk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXN1bHQgPSBpdGVtcztcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlc3VsdCk7XHJcbiAgICB9KTtcclxufSIsImltcG9ydCBTZXJ2ZXIgZnJvbSAnLi4vU2VydmVyJztcclxuaW1wb3J0IExpc3QgZnJvbSAnLi4vTGlzdCc7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkVGFzayA9ICh0YXNrOiBvYmplY3QpID0+IHtcclxuICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdDtcclxuXHJcbiAgICBTZXJ2ZXIuYWRkVGFzayh0YXNrKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIGxpc3QucmVuZGVyKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgIH0pO1xyXG59IiwiaW1wb3J0IHsgYWRkVGFzayB9IGZyb20gJy4vbW9kdWxlcy9hZGRUYXNrJztcclxuaW1wb3J0IHsgZWRpdFRhc2sgfSBmcm9tICcuL21vZHVsZXMvZWRpdFRhc2snO1xyXG5cclxuaW50ZXJmYWNlIFJlbmRlck9wdGlvbnMge1xyXG4gICAgbW9kZTogJ0FkZCcgfCAnRWRpdCc7XHJcbiAgICB0YXNrPzoge1xyXG4gICAgICAgIHRpdGxlPzogc3RyaW5nO1xyXG4gICAgICAgIGRldGFpbHM/OiBzdHJpbmc7XHJcbiAgICAgICAgcHJpb3JpdHk/OiBudW1iZXI7XHJcbiAgICAgICAgaWQ/OiBudW1iZXI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jbGFzcyBGb3JtIHtcclxuICAgIHByaXZhdGUgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKTtcclxuICAgIHByaXZhdGUgdGl0bGU6IGFueTtcclxuICAgIHByaXZhdGUgZGV0YWlsczogYW55O1xyXG4gICAgcHJpdmF0ZSBwcmlvcml0eTogYW55O1xyXG4gICAgcHJpdmF0ZSBzdWJtaXQ6IGFueTtcclxuICAgIHByaXZhdGUgZGVmYXVsdFRhc2s6IG9iamVjdCA9IHtcclxuICAgICAgICB0aXRsZTogXCJcIixcclxuICAgICAgICBkZXRhaWxzOiBcIlwiLFxyXG4gICAgICAgIHByaW9yaXR5OiAxLFxyXG4gICAgICAgIGlkOiBcIlwiXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoaW5pdD86IGJvb2xlYW4pIHtcclxuICAgICAgICBpZiAoaW5pdCkgdGhpcy5yZW5kZXIoeyBtb2RlOiAnQWRkJywgdGFzazogdGhpcy5kZWZhdWx0VGFzayB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNldElucHV0cygpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMnKTtcclxuICAgICAgICB0aGlzLnByaW9yaXR5ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5Jyk7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBiaW5kQWRkKCkge1xyXG4gICAgICAgIHRoaXMuc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhZGRUYXNrKHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHsgbW9kZTogJ0FkZCcsIHRhc2s6IHRoaXMuZGVmYXVsdFRhc2sgfSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYmluZEVkaXQoKSB7XHJcbiAgICAgICAgdGhpcy5zdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGVkaXRUYXNrKHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHsgbW9kZTogJ0FkZCcsIHRhc2s6IHRoaXMuZGVmYXVsdFRhc2sgfSk7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgY29uc3QgdGl0bGUgPSB0aGlzLnRpdGxlLnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSB0aGlzLmRldGFpbHMudmFsdWU7XHJcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSB0aGlzLnByaW9yaXR5LnZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5zdWJtaXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgcmV0dXJuIHsgdGl0bGUsIGRldGFpbHMsIHByaW9yaXR5LCBpc0RvbmU6IDAsIGlkIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckNhbmNlbEJ1dHRvbigpIHtcclxuICAgICAgICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBjYW5jZWwuY2xhc3NMaXN0LmFkZCgnYnRuJywgJ2J0bi1wcmltYXJ5JywgJ2NvbC00JywgJ2gtMjUnKTtcclxuICAgICAgICBjYW5jZWwuaW5uZXJIVE1MID0gJ0NhbmNlbCc7XHJcbiAgICAgICAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih7IG1vZGU6ICdBZGQnLCB0YXNrOiB0aGlzLmRlZmF1bHRUYXNrIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoY2FuY2VsKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKHByb3A6IFJlbmRlck9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuXHJcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZWxkc2V0Jyk7XHJcbiAgICAgICAgZm9ybS5pbm5lckhUTUwgPSBgXHJcbiAgICAgICAgICAgIDxoNT4ke3Byb3AubW9kZX0gdGFzazo8L2g1PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJjb2wtZm9ybS1sYWJlbFwiIGZvcj1cInRpdGxlXCI+VGl0bGU6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHBsYWNlaG9sZGVyPVwiRW50ZXIgbm90ZSB0aXRsZVwiIGlkPVwidGl0bGVcIiB2YWx1ZT1cIiR7cHJvcC50YXNrLnRpdGxlfVwiPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJkZXRhaWxzXCI+QWRkaXRpb25hbCBkZXRhaWxzIChvcHRpb25hbCk6PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImRldGFpbHNcIiByb3dzPVwiM1wiPiR7cHJvcC50YXNrLmRldGFpbHN9PC90ZXh0YXJlYT5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWdyb3VwIGNvbC0zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cInByaW9yaXR5XCIgdmFsdWU9XCIke3Byb3AudGFzay5wcmlvcml0eX1cIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxXCI+MTwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjJcIj4yPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiM1wiPjM8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI0XCI+NDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjVcIj41PC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwicHJpb3JpdHlcIj5Qcmlvcml0eTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC01XCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgY29sLTQgaC0yNVwiIGlkPVwic3VibWl0XCIgZGF0YS1pZD1cIiR7cHJvcC50YXNrLmlkfVwiPiR7cHJvcC5tb2RlfTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQoZm9ybSk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0SW5wdXRzKCk7XHJcblxyXG4gICAgICAgIGlmIChwcm9wLm1vZGUgPT09ICdBZGQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZEFkZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZEVkaXQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYW5jZWxCdXR0b24oKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVuYWJsZUVkaXQodGFzazogb2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoeyBtb2RlOiAnRWRpdCcsIHRhc2s6IHRhc2sgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm07IiwiaW1wb3J0ICcuL3N0eWxlcy9zdHlsZXMuY3NzJztcclxuaW1wb3J0IHsgaW5pdCB9IGZyb20gJy4vaW5kZXgnO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gICAgaW5pdCgpO1xyXG59KSIsImltcG9ydCBGb3JtIGZyb20gJy4vRm9ybSc7XHJcbmltcG9ydCBMaXN0IGZyb20gJy4vTGlzdCc7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXppbmcuLi4nKTtcclxuICAgIGNvbnN0IGxpc3QgPSBuZXcgTGlzdCh0cnVlKTtcclxuICAgIGNvbnN0IGZvcm0gPSBuZXcgRm9ybSh0cnVlKTtcclxufSIsIlxuLyoqXG4gKiBXaGVuIHNvdXJjZSBtYXBzIGFyZSBlbmFibGVkLCBgc3R5bGUtbG9hZGVyYCB1c2VzIGEgbGluayBlbGVtZW50IHdpdGggYSBkYXRhLXVyaSB0b1xuICogZW1iZWQgdGhlIGNzcyBvbiB0aGUgcGFnZS4gVGhpcyBicmVha3MgYWxsIHJlbGF0aXZlIHVybHMgYmVjYXVzZSBub3cgdGhleSBhcmUgcmVsYXRpdmUgdG8gYVxuICogYnVuZGxlIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgcGFnZS5cbiAqXG4gKiBPbmUgc29sdXRpb24gaXMgdG8gb25seSB1c2UgZnVsbCB1cmxzLCBidXQgdGhhdCBtYXkgYmUgaW1wb3NzaWJsZS5cbiAqXG4gKiBJbnN0ZWFkLCB0aGlzIGZ1bmN0aW9uIFwiZml4ZXNcIiB0aGUgcmVsYXRpdmUgdXJscyB0byBiZSBhYnNvbHV0ZSBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgcGFnZSBsb2NhdGlvbi5cbiAqXG4gKiBBIHJ1ZGltZW50YXJ5IHRlc3Qgc3VpdGUgaXMgbG9jYXRlZCBhdCBgdGVzdC9maXhVcmxzLmpzYCBhbmQgY2FuIGJlIHJ1biB2aWEgdGhlIGBucG0gdGVzdGAgY29tbWFuZC5cbiAqXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzKSB7XG4gIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXG4gIHZhciBsb2NhdGlvbiA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgd2luZG93LmxvY2F0aW9uO1xuXG4gIGlmICghbG9jYXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJmaXhVcmxzIHJlcXVpcmVzIHdpbmRvdy5sb2NhdGlvblwiKTtcbiAgfVxuXG5cdC8vIGJsYW5rIG9yIG51bGw/XG5cdGlmICghY3NzIHx8IHR5cGVvZiBjc3MgIT09IFwic3RyaW5nXCIpIHtcblx0ICByZXR1cm4gY3NzO1xuICB9XG5cbiAgdmFyIGJhc2VVcmwgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3Q7XG4gIHZhciBjdXJyZW50RGlyID0gYmFzZVVybCArIGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teXFwvXSokLywgXCIvXCIpO1xuXG5cdC8vIGNvbnZlcnQgZWFjaCB1cmwoLi4uKVxuXHQvKlxuXHRUaGlzIHJlZ3VsYXIgZXhwcmVzc2lvbiBpcyBqdXN0IGEgd2F5IHRvIHJlY3Vyc2l2ZWx5IG1hdGNoIGJyYWNrZXRzIHdpdGhpblxuXHRhIHN0cmluZy5cblxuXHQgL3VybFxccypcXCggID0gTWF0Y2ggb24gdGhlIHdvcmQgXCJ1cmxcIiB3aXRoIGFueSB3aGl0ZXNwYWNlIGFmdGVyIGl0IGFuZCB0aGVuIGEgcGFyZW5zXG5cdCAgICggID0gU3RhcnQgYSBjYXB0dXJpbmcgZ3JvdXBcblx0ICAgICAoPzogID0gU3RhcnQgYSBub24tY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgICAgIFteKShdICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAoPzogID0gU3RhcnQgYW5vdGhlciBub24tY2FwdHVyaW5nIGdyb3Vwc1xuXHQgICAgICAgICAgICAgICAgIFteKShdKyAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICB8ICA9IE9SXG5cdCAgICAgICAgICAgICAgICAgXFwoICA9IE1hdGNoIGEgc3RhcnQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICAgICAgW14pKF0qICA9IE1hdGNoIGFueXRoaW5nIHRoYXQgaXNuJ3QgYSBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgICAgIFxcKSAgPSBNYXRjaCBhIGVuZCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKSAgPSBFbmQgR3JvdXBcbiAgICAgICAgICAgICAgKlxcKSA9IE1hdGNoIGFueXRoaW5nIGFuZCB0aGVuIGEgY2xvc2UgcGFyZW5zXG4gICAgICAgICAgKSAgPSBDbG9zZSBub24tY2FwdHVyaW5nIGdyb3VwXG4gICAgICAgICAgKiAgPSBNYXRjaCBhbnl0aGluZ1xuICAgICAgICkgID0gQ2xvc2UgY2FwdHVyaW5nIGdyb3VwXG5cdCBcXCkgID0gTWF0Y2ggYSBjbG9zZSBwYXJlbnNcblxuXHQgL2dpICA9IEdldCBhbGwgbWF0Y2hlcywgbm90IHRoZSBmaXJzdC4gIEJlIGNhc2UgaW5zZW5zaXRpdmUuXG5cdCAqL1xuXHR2YXIgZml4ZWRDc3MgPSBjc3MucmVwbGFjZSgvdXJsXFxzKlxcKCgoPzpbXikoXXxcXCgoPzpbXikoXSt8XFwoW14pKF0qXFwpKSpcXCkpKilcXCkvZ2ksIGZ1bmN0aW9uKGZ1bGxNYXRjaCwgb3JpZ1VybCkge1xuXHRcdC8vIHN0cmlwIHF1b3RlcyAoaWYgdGhleSBleGlzdClcblx0XHR2YXIgdW5xdW90ZWRPcmlnVXJsID0gb3JpZ1VybFxuXHRcdFx0LnRyaW0oKVxuXHRcdFx0LnJlcGxhY2UoL15cIiguKilcIiQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSlcblx0XHRcdC5yZXBsYWNlKC9eJyguKiknJC8sIGZ1bmN0aW9uKG8sICQxKXsgcmV0dXJuICQxOyB9KTtcblxuXHRcdC8vIGFscmVhZHkgYSBmdWxsIHVybD8gbm8gY2hhbmdlXG5cdFx0aWYgKC9eKCN8ZGF0YTp8aHR0cDpcXC9cXC98aHR0cHM6XFwvXFwvfGZpbGU6XFwvXFwvXFwvfFxccyokKS9pLnRlc3QodW5xdW90ZWRPcmlnVXJsKSkge1xuXHRcdCAgcmV0dXJuIGZ1bGxNYXRjaDtcblx0XHR9XG5cblx0XHQvLyBjb252ZXJ0IHRoZSB1cmwgdG8gYSBmdWxsIHVybFxuXHRcdHZhciBuZXdVcmw7XG5cblx0XHRpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvL1wiKSA9PT0gMCkge1xuXHRcdCAgXHQvL1RPRE86IHNob3VsZCB3ZSBhZGQgcHJvdG9jb2w/XG5cdFx0XHRuZXdVcmwgPSB1bnF1b3RlZE9yaWdVcmw7XG5cdFx0fSBlbHNlIGlmICh1bnF1b3RlZE9yaWdVcmwuaW5kZXhPZihcIi9cIikgPT09IDApIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBiYXNlIHVybFxuXHRcdFx0bmV3VXJsID0gYmFzZVVybCArIHVucXVvdGVkT3JpZ1VybDsgLy8gYWxyZWFkeSBzdGFydHMgd2l0aCAnLydcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gcGF0aCBzaG91bGQgYmUgcmVsYXRpdmUgdG8gY3VycmVudCBkaXJlY3Rvcnlcblx0XHRcdG5ld1VybCA9IGN1cnJlbnREaXIgKyB1bnF1b3RlZE9yaWdVcmwucmVwbGFjZSgvXlxcLlxcLy8sIFwiXCIpOyAvLyBTdHJpcCBsZWFkaW5nICcuLydcblx0XHR9XG5cblx0XHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIHVybCguLi4pXG5cdFx0cmV0dXJuIFwidXJsKFwiICsgSlNPTi5zdHJpbmdpZnkobmV3VXJsKSArIFwiKVwiO1xuXHR9KTtcblxuXHQvLyBzZW5kIGJhY2sgdGhlIGZpeGVkIGNzc1xuXHRyZXR1cm4gZml4ZWRDc3M7XG59O1xuIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cblxudmFyIHN0eWxlc0luRG9tID0ge307XG5cbnZhclx0bWVtb2l6ZSA9IGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbztcblxuXHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0cmV0dXJuIG1lbW87XG5cdH07XG59O1xuXG52YXIgaXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHQvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuXHQvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG5cdC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcblx0Ly8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG5cdC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuXHRyZXR1cm4gd2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2I7XG59KTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbn07XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBwYXNzaW5nIGZ1bmN0aW9uIGluIG9wdGlvbnMsIHRoZW4gdXNlIGl0IGZvciByZXNvbHZlIFwiaGVhZFwiIGVsZW1lbnQuXG4gICAgICAgICAgICAgICAgLy8gVXNlZnVsIGZvciBTaGFkb3cgUm9vdCBzdHlsZSBpLmVcbiAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgLy8gICBpbnNlcnRJbnRvOiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvb1wiKS5zaGFkb3dSb290IH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0YXJnZXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdHZhciBzdHlsZVRhcmdldCA9IGdldFRhcmdldC5jYWxsKHRoaXMsIHRhcmdldCk7XG5cdFx0XHQvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXHRcdFx0aWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG5cdFx0XHRcdFx0Ly8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuXHRcdFx0XHR9IGNhdGNoKGUpIHtcblx0XHRcdFx0XHRzdHlsZVRhcmdldCA9IG51bGw7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuXHRcdH1cblx0XHRyZXR1cm4gbWVtb1t0YXJnZXRdXG5cdH07XG59KSgpO1xuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhclx0c2luZ2xldG9uQ291bnRlciA9IDA7XG52YXJcdHN0eWxlc0luc2VydGVkQXRUb3AgPSBbXTtcblxudmFyXHRmaXhVcmxzID0gcmVxdWlyZShcIi4vdXJsc1wiKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmICh0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZiAodHlwZW9mIGRvY3VtZW50ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3R5bGUtbG9hZGVyIGNhbm5vdCBiZSB1c2VkIGluIGEgbm9uLWJyb3dzZXIgZW52aXJvbm1lbnRcIik7XG5cdH1cblxuXHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRvcHRpb25zLmF0dHJzID0gdHlwZW9mIG9wdGlvbnMuYXR0cnMgPT09IFwib2JqZWN0XCIgPyBvcHRpb25zLmF0dHJzIDoge307XG5cblx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0aWYgKCFvcHRpb25zLnNpbmdsZXRvbiAmJiB0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gIT09IFwiYm9vbGVhblwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSA8aGVhZD4gZWxlbWVudFxuICAgICAgICBpZiAoIW9wdGlvbnMuaW5zZXJ0SW50bykgb3B0aW9ucy5pbnNlcnRJbnRvID0gXCJoZWFkXCI7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIHRoZSB0YXJnZXRcblx0aWYgKCFvcHRpb25zLmluc2VydEF0KSBvcHRpb25zLmluc2VydEF0ID0gXCJib3R0b21cIjtcblxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QsIG9wdGlvbnMpO1xuXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZSAobmV3TGlzdCkge1xuXHRcdHZhciBtYXlSZW1vdmUgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0LCBvcHRpb25zKTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblxuXHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSBkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufTtcblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20gKHN0eWxlcywgb3B0aW9ucykge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG5cdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdGRvbVN0eWxlLnJlZnMrKztcblxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0fVxuXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzIChsaXN0LCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZXMgPSBbXTtcblx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gbGlzdFtpXTtcblx0XHR2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblxuXHRcdGlmKCFuZXdTdHlsZXNbaWRdKSBzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2UgbmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50IChvcHRpb25zLCBzdHlsZSkge1xuXHR2YXIgdGFyZ2V0ID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEludG8pXG5cblx0aWYgKCF0YXJnZXQpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydEludG8nIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcblx0fVxuXG5cdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlc0luc2VydGVkQXRUb3Bbc3R5bGVzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdGlmICghbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIHRhcmdldC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYgKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0fVxuXHRcdHN0eWxlc0luc2VydGVkQXRUb3AucHVzaChzdHlsZSk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpIHtcblx0XHR2YXIgbmV4dFNpYmxpbmcgPSBnZXRFbGVtZW50KG9wdGlvbnMuaW5zZXJ0SW50byArIFwiIFwiICsgb3B0aW9ucy5pbnNlcnRBdC5iZWZvcmUpO1xuXHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoc3R5bGUsIG5leHRTaWJsaW5nKTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJbU3R5bGUgTG9hZGVyXVxcblxcbiBJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0JyAoJ29wdGlvbnMuaW5zZXJ0QXQnKSBmb3VuZC5cXG4gTXVzdCBiZSAndG9wJywgJ2JvdHRvbScsIG9yIE9iamVjdC5cXG4gKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyI2luc2VydGF0KVxcblwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQgKHN0eWxlKSB7XG5cdGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHN0eWxlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGUpO1xuXG5cdHZhciBpZHggPSBzdHlsZXNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGUpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlc0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblxuXHRpZihvcHRpb25zLmF0dHJzLnR5cGUgPT09IHVuZGVmaW5lZCkge1xuXHRcdG9wdGlvbnMuYXR0cnMudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0fVxuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlIChvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlLCB1cGRhdGUsIHJlbW92ZSwgcmVzdWx0O1xuXG5cdC8vIElmIGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHdhcyBkZWZpbmVkLCBydW4gaXQgb24gdGhlIGNzc1xuXHRpZiAob3B0aW9ucy50cmFuc2Zvcm0gJiYgb2JqLmNzcykge1xuXHQgICAgcmVzdWx0ID0gb3B0aW9ucy50cmFuc2Zvcm0ob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xuLy8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odXNlU291cmNlTWFwKSB7XG5cdHZhciBsaXN0ID0gW107XG5cblx0Ly8gcmV0dXJuIHRoZSBsaXN0IG9mIG1vZHVsZXMgYXMgY3NzIHN0cmluZ1xuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHR2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0cmV0dXJuIFwiQG1lZGlhIFwiICsgaXRlbVsyXSArIFwie1wiICsgY29udGVudCArIFwifVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRlbnQ7XG5cdFx0XHR9XG5cdFx0fSkuam9pbihcIlwiKTtcblx0fTtcblxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRsaXN0LmkgPSBmdW5jdGlvbihtb2R1bGVzLCBtZWRpYVF1ZXJ5KSB7XG5cdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0dmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdGlmKHR5cGVvZiBpZCA9PT0gXCJudW1iZXJcIilcblx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xuXHRcdH1cblx0XHRmb3IoaSA9IDA7IGkgPCBtb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHQvLyB0aGlzIGltcGxlbWVudGF0aW9uIGlzIG5vdCAxMDAlIHBlcmZlY3QgZm9yIHdlaXJkIG1lZGlhIHF1ZXJ5IGNvbWJpbmF0aW9uc1xuXHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRpZih0eXBlb2YgaXRlbVswXSAhPT0gXCJudW1iZXJcIiB8fCAhYWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpdGVtWzBdXSkge1xuXHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdH0gZWxzZSBpZihtZWRpYVF1ZXJ5KSB7XG5cdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGxpc3QucHVzaChpdGVtKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdHJldHVybiBsaXN0O1xufTtcblxuZnVuY3Rpb24gY3NzV2l0aE1hcHBpbmdUb1N0cmluZyhpdGVtLCB1c2VTb3VyY2VNYXApIHtcblx0dmFyIGNvbnRlbnQgPSBpdGVtWzFdIHx8ICcnO1xuXHR2YXIgY3NzTWFwcGluZyA9IGl0ZW1bM107XG5cdGlmICghY3NzTWFwcGluZykge1xuXHRcdHJldHVybiBjb250ZW50O1xuXHR9XG5cblx0aWYgKHVzZVNvdXJjZU1hcCAmJiB0eXBlb2YgYnRvYSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdHZhciBzb3VyY2VNYXBwaW5nID0gdG9Db21tZW50KGNzc01hcHBpbmcpO1xuXHRcdHZhciBzb3VyY2VVUkxzID0gY3NzTWFwcGluZy5zb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRyZXR1cm4gJy8qIyBzb3VyY2VVUkw9JyArIGNzc01hcHBpbmcuc291cmNlUm9vdCArIHNvdXJjZSArICcgKi8nXG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcblx0fVxuXG5cdHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59XG5cbi8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcbmZ1bmN0aW9uIHRvQ29tbWVudChzb3VyY2VNYXApIHtcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG5cdHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzb3VyY2VNYXApKSkpO1xuXHR2YXIgZGF0YSA9ICdzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCwnICsgYmFzZTY0O1xuXG5cdHJldHVybiAnLyojICcgKyBkYXRhICsgJyAqLyc7XG59XG4iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKGZhbHNlKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIC5zdGFydCB7XFxyXFxuICAgIGNvbG9yOiBkYXJrcmVkO1xcclxcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxyXFxufSAqL1wiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcbiIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3N0eWxlcy5jc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGVzLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vc3R5bGVzLmNzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSJdLCJzb3VyY2VSb290IjoiIn0=